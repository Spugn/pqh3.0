var ge=Object.defineProperty;var ye=(q,U,L)=>U in q?ge(q,U,{enumerable:!0,configurable:!0,writable:!0,value:L}):q[U]=L;var Z=(q,U,L)=>(ye(q,typeof U!="symbol"?U+"":U,L),L);import{f as te,c as $,g as he}from"./tslib.es6-002590ef.js";import{e as H}from"./equipment.api-8a7ec542.js";const G=(()=>{function q(b,m,j="UNKNOWN",J={}){const x=JSON.parse(JSON.stringify(m)),u={};for(const f in b.required)i(f,b.required[f]);return u;function i(f,M){const _=H.recipe(f,j),I=H.fragmentID(f);if(x[f]&&!J[H.rarity(f)]){if(u[f]=M-x[f],u[f]<=0){u[f]=M,x[f]-=M;return}u[f]=x[f],M-=x[f],x[f]=0}if(!J[H.rarity(f)]&&_.required_pieces>0&&(u[I]=_.required_pieces*M+(u[I]||0)),!J[H.rarity(f)])for(const A of _.required_items)i(A,M)}}function U(b,m,j="UNKNOWN",J={},x=!1){const u=`api.project#check: (${j} | ${b.date})`;x||console.time(u);const i=q(b,m,j,J),f=JSON.parse(JSON.stringify(i));for(const M in i)i[M]-=m[M]||0,i[M]<=0&&delete i[M];return x||console.timeEnd(u),{success:Object.keys(i).length<=0,remaining:i,recipe:f}}function L(b,m,j="UNKNOWN",J={}){const x=`api.project#consume: (${j} | ${b.date})`;console.time(x);const u=JSON.parse(JSON.stringify(m)),i=q(b,m,j,J);for(const f in i)u[f]-=i[f],(u[f]<=0||isNaN(u[f]))&&delete u[f];return console.timeEnd(x),u}function h(b){const m={};for(const j of b)for(const J in j.required)m[J]=(m[J]||0)+j.required[J];return m}function B(b,m,j="UNKNOWN",J={}){const x=U(b,m,j,J),u={progress:-1,items:{current:0,max:0},fragments:{current:0,max:0},check:x};for(const i in x.recipe)u.items.max++,u.fragments.max+=x.recipe[i];if(x.success)return u.progress=100,u.items.current=u.items.max,u.fragments.current=u.fragments.max,u;for(const i in x.remaining)u.items.current++,u.fragments.current+=x.remaining[i];return u.items.current=u.items.max-u.items.current,u.fragments.current=u.fragments.max-u.fragments.current,u.progress=parseFloat((u.fragments.current/u.fragments.max*100).toFixed(2)),u}function Q(b,m,j,J={},x=!0){var f,M;let u;x?u=Y.character.get():u={};let i=[];for(const _ of b){let I=function(){let t={},c;for(let r=A;r<=m;r++)for(let n=0;n<6;n++){if(c=te.equipment(_,r)[n]||$.placeholder_id,c===$.placeholder_id){C[n]=!1;continue}if(A===m)!o[n]&&C[n]&&l();else if(r===m&&C[n])l();else if(r<m){if(r===A&&o[n])continue;l()}}return t;function l(){t[c]=t[c]?t[c]+1:1}};const A=((f=u[_])==null?void 0:f.rank)||1;if(A>m)continue;const o=((M=u[_])==null?void 0:M.equipment)||[!1,!1,!1,!1,!1,!1];let C=[!1,!1,!1,!1,!1,!1];if(A===m){let t=0;for(let c=0;c<6;c++){if(o[c]){C[c]=!0;continue}j[c]&&(C[c]=!0,t++)}if(t<=0)continue}else{if(A+1===m&&o.filter(Boolean).length===6&&j.filter(Boolean).length===0)continue;C=j}const V={type:"character",date:Date.now()+b.indexOf(_),priority:!1,details:{avatar_id:_,formal_name:`${te.name(_,Y.region.get())} (${_})`,name:"",start:{rank:A,equipment:o},end:{rank:m,equipment:C},memory_piece:0,pure_memory_piece:0,ignored_rarities:J},required:I()};Object.keys(V.required).length<=0||i.push(V)}if(i.length>=2){const _={type:"character",date:Date.now()+i.length,priority:!1,details:{avatar_id:"999999",formal_name:"All Projects",name:"",start:{rank:1,equipment:[!1,!1,!1,!1,!1,!1]},end:{rank:1,equipment:[!1,!1,!1,!1,!1,!1]},memory_piece:0,pure_memory_piece:0,ignored_rarities:J},required:{}};for(const I of i)for(const A in I.required)_.required[A]=(_.required[A]||0)+I.required[A];i.unshift(_)}return i}function X(b=0){const m={};if(b>0)for(let i=0;i<b&&Object.keys(m).length<b;i++)m[H.getRandomItem()]=10;const j=te.getRandomCharacter(),J=Math.floor(Math.random()*te.getMaxRank())+1,x=Math.floor(Math.random()*J)+1;return{type:"character",date:Date.now(),priority:!1,details:{avatar_id:j.id,formal_name:`${j.name.JP} (${j.id})`,name:j.name.JP,start:{rank:x,equipment:u()},end:{rank:J,equipment:u()},memory_piece:0,pure_memory_piece:0,ignored_rarities:{1:Math.random()<.5,2:Math.random()<.5,3:Math.random()<.5,4:Math.random()<.5,5:Math.random()<.5,6:Math.random()<.5,7:Math.random()<.5,8:Math.random()<.5}},required:m};function u(){return[Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5]}}function z(b=0){const m={};if(b>0)for(let j=0;j<b&&Object.keys(m).length<b;j++)m[H.getRandomItem()]=10;return{type:"item",date:Date.now(),priority:!1,details:{name:"Untitled Project",ignored_rarities:{1:Math.random()<.5,2:Math.random()<.5,3:Math.random()<.5,4:Math.random()<.5,5:Math.random()<.5,6:Math.random()<.5,7:Math.random()<.5,8:Math.random()<.5}},required:m}}return{build:q,check:U,consume:L,compile:h,progress:B,bulkCreateProjects:Q,getTestCharacterProject:X,getTestItemProject:z}})();class re{}Z(re,"max_chapter",-1);const ne=(()=>{const q=he.quest;function U(t){return q[t]}function L(t,c){var l,r,n,a,p;if(q[t])return c?((n=(r=q[t])==null?void 0:r.name)==null?void 0:n[c])||((p=(a=q[t])==null?void 0:a.name)==null?void 0:p.JP):(l=q[t])==null?void 0:l.name}function h(t,c){var l,r,n,a,p;if(q[t])return c?((n=(r=q[t])==null?void 0:r.stamina)==null?void 0:n[c])||((p=(a=q[t])==null?void 0:a.stamina)==null?void 0:p.JP):(l=q[t])==null?void 0:l.stamina}function B(t,c){var n,a;const l=(n=q[t])==null?void 0:n.drop_table[c],r=l?l.memory_piece:(a=q[t])==null?void 0:a.drop_table.JP.memory_piece;return r&&r.item!==$.placeholder_id?r:void 0}function Q(t,c){var n,a;const l=(n=q[t])==null?void 0:n.drop_table[c];return(l?l.drops:(a=q[t])==null?void 0:a.drop_table.JP.drops)||[]}function X(t,c){var n,a;const l=(n=q[t])==null?void 0:n.drop_table[c];return(l?l.subdrops:(a=q[t])==null?void 0:a.drop_table.JP.subdrops)||[]}function z(t){return t!==""&&!t.includes($.difficulty.hard)&&!t.includes($.difficulty.event)}function b(t){return t.includes($.difficulty.hard)&&!t.includes($.difficulty.very_hard)}function m(t){return t.includes($.difficulty.very_hard)}function j(t){return t.includes($.difficulty.event)}function J(t){return parseInt(t.split("-")[0])}function x(t){return parseInt(t.split("-")[1])}function u(){if(re.max_chapter===-1){let t=-1;for(const c in q){const l=J(c);t=Math.max(t,l)}re.max_chapter=t}return re.max_chapter}function i(t){return q[t]!==void 0}function f({all_projects:t,compiled_items:c,inventory:l,settings:r={},use_inventory:n=!1,language:a="UNKNOWN"}){const p=`api.quest#build: (${a} | ${Date.now().toLocaleString()})`;console.time(p);let E,O;if(n){const D=G.check({date:"quest-build",required:c},l,a,r.ignored_rarities);E=D.remaining,O=D.recipe}else E=O=G.build({date:"quest-build",required:c},{},a,r.ignored_rarities);if(Object.keys(E).length<=0)return console.log("can't make quest list with no required items"),console.timeEnd(p),{required:E,required_clean:O,quest_scores:[],priority_items:[],priority_amount:{}};let g=new Set,S={};for(const D of t)if(D.priority)for(const v in D.required)H.exists(v)&&(g.add(v),S[v]=(S[v]||0)+D.required[v]);const R=Array.from(g).reduce((D,v)=>(D[v]=S[v],D),{});S=G.build({date:"quest-build",required:R},{},a,{});const N=Object.keys(S),k=I({required:E,priority_items:N,priority_levels:{},settings:r,language:a});return console.timeEnd(p),{required:E,required_clean:O,quest_scores:k,priority_items:N,priority_amount:S}}function M({session_projects:t,inventory:c,settings:l,use_inventory:r=!1,language:n,silent:a=!1}){var s;c||(c=Y.inventory.get()),l||(l=Y.settings.quest.get()),n||(n=Y.region.get());const p=`api.quest#build2: (${n} | ${Date.now().toLocaleString()})`;a||console.time(p);const E=Object.keys(t).filter(K=>t[K].enabled).map(K=>t[K].project),O=G.compile(E);let g,S;if(r){const K=G.check({date:"quest-build-with-inventory",required:O},c,n,l.ignored_rarities,a);g=K.remaining,S=K.recipe}else g=S=G.build({date:"quest-build-no-inventory",required:O},{},n,l.ignored_rarities);if(Object.keys(g).length<=0)return a||(console.log("can't make quest list with no required items"),console.timeEnd(p)),{required:g,required_clean:S,quest_scores:[],priority_items:[],priority_amount:{},projects:E};let R={},N=new Set,k={};for(const K in t){const F=t[K].project;if(F.priority)for(const d in F.required){if(!H.exists(d))continue;const ee=((s=F.details)==null?void 0:s.priority_level)||2;R[d]=R[d]&&R[d]>ee?R[d]:ee,N.add(d),k[d]=(k[d]||0)+F.required[d]}}const D=Array.from(N).reduce((K,F)=>(K[F]=k[F],K),{}),v=_(D,R,n),T=Object.keys(v.priority_amount),w=I({required:g,priority_items:T,priority_levels:v.priority_levels,settings:l,language:n});return a||console.timeEnd(p),{required:g,required_clean:S,quest_scores:w,priority_items:T,priority_amount:k,projects:E}}function _(t,c,l="UNKNOWN"){const r={},n={};for(const p in t)a(p,t[p],c[p]);return{priority_amount:r,priority_levels:n};function a(p,E,O){const g=H.recipe(p,l),S=H.fragmentID(p);g.required_pieces>0&&(r[S]=g.required_pieces*E+(r[S]||0),n[S]=n[S]&&n[S]>O?n[S]:O);for(const R of g.required_items)a(R,E,O)}}function I({required:t,priority_items:c,priority_levels:l,settings:r={},language:n="UNKNOWN"}){var p,E,O;let a=[];for(const g in q){let S=function(k){if(!k||!t.hasOwnProperty(k.item))return 0;let D=k.drop_rate;return D*=c.includes(k.item)?l[k.item]:1,D+=t[k.item]/$.inventory.max.fragment*1e3,D};const R=J(g);if(r.chapter&&(R<r.chapter.min||R>r.chapter.max)||r.disabled_difficulty&&(r.disabled_difficulty.Normal&&z(g)||r.disabled_difficulty.Hard&&b(g)||r.disabled_difficulty["Very Hard"]&&m(g)||r.disabled_difficulty.Event&&j(g)))continue;if(r.item_filter&&r.item_filter.length>0){let k=!1;for(const D of r.item_filter)if(A(D,g,n)){k=!0;break}if(!k)continue}let N=0;N+=S(B(g,n));for(const k of Q(g,n))N+=S(k);for(const k of X(g,n))N+=S(k);if(z(g)&&((p=r==null?void 0:r.drop_buff)!=null&&p.Normal)&&(N*=r.drop_buff.Normal),b(g)&&((E=r==null?void 0:r.drop_buff)!=null&&E.Hard)&&(N*=r.drop_buff.Hard),m(g)&&((O=r==null?void 0:r.drop_buff)!=null&&O["Very Hard"])&&(N*=r.drop_buff["Very Hard"]),N>0){const k=h(g,n);typeof k=="number"&&(N/=k),a.push({id:g,score:+N.toFixed(2)})}}return a.sort((g,S)=>{const R={id:g.id,chapter:J(g.id),number:x(g.id),value:0},N={id:S.id,chapter:J(S.id),number:x(S.id),value:0};function k(w){m(w.id)&&(w.value+=2e3),(b(w.id)||j(w.id))&&(w.value+=1e3),w.value+=w.chapter*1e4+w.number*10}function D(w,s){return w-s}function v(w,s){return s-w}k(R),k(N);let T=r.sort&&r.sort.score?D(g.score,S.score):v(g.score,S.score);return T!==0?T:r.sort&&r.sort.list?v(R.value,N.value):D(R.value,N.value)}),a}function A(t,c,l){let r,n;if(H.exists(t)?(r=t,n=H.fragment(t)):(r=H.convertFragmentID(t),n=t),r===$.placeholder_id)return!1;const a=B(c,l);if((a==null?void 0:a.item)===r)return!0;for(const p of Q(c,l))if(p.item===r||p.item===n)return!0;for(const p of X(c,l))if(p.item===r||p.item===n)return!0;return!1}function o(t){console.time("quest.estimate");const l=G.build({required:t},{});let r=0;for(const n in q){let a=function(p){const E=B(n,"JP");if(E&&l.hasOwnProperty(E.item))return++p;for(const O of Q(n,"JP"))if(l.hasOwnProperty(O.item))return++p;for(const O of X(n,"JP"))if(l.hasOwnProperty(O.item))return++p;return p};if(r>=100)break;r=a(r)}return console.timeEnd("quest.estimate"),r}function C(t,c={normal_drop:1,hard_drop:1,very_hard_drop:1,use_inventory:!0,precise:!1},l=void 0){const r=`api.quest#questSimulator: (${Date.now().toLocaleString()};precise:${c.precise||!1})`;console.time(r);let n;c.use_inventory?n=JSON.parse(JSON.stringify(Y.inventory.get())):n={};let a;l?a=JSON.parse(JSON.stringify(l)):a=S();let p=[],E=0,O={};const g=JSON.parse(JSON.stringify(a.required));for(;a.quest_scores.length>0;){const N=R(a.quest_scores[0].id,Y.region.get());(c.precise||N)&&(a=S())}return console.timeEnd(r),{stamina:E,quests:p,total_drops:O,required:g};function S(){return M({session_projects:t,inventory:n,use_inventory:!0,silent:!0,settings:Y.settings.quest.get()})}function R(N,k){let D=!1;const v=j(N)?1:m(N)?c.very_hard_drop||1:b(N)?c.hard_drop||1:z(N)&&c.normal_drop||1,T=h(N,k),w={};E+=T;const s=B(N,k);s&&Math.random()*100<=s.drop_rate&&(n[s.item]=n[s.item]?n[s.item]+v:v,O[s.item]=O[s.item]?O[s.item]+v:v,w[s.item]=w[s.item]?w[s.item]+v:v,a.required_clean[s.item]&&a.required[s.item]>0&&n[s.item]>=a.required_clean[s.item]&&(D=!0));for(const d of Q(N,k)){if(d.item===$.placeholder_id)continue;Math.random()*100<=d.drop_rate&&(n[d.item]=n[d.item]?n[d.item]+v:v,O[d.item]=O[d.item]?O[d.item]+v:v,w[d.item]=w[d.item]?w[d.item]+v:v,a.required_clean[d.item]&&a.required[d.item]>0&&n[d.item]>=a.required_clean[d.item]&&(D=!0))}const K=Math.random()*100;let F=0;for(const d of X(N,k))if(d.item!==$.placeholder_id&&(F+=d.drop_rate,K<=F)){n[d.item]=n[d.item]?n[d.item]+v:v,O[d.item]=O[d.item]?O[d.item]+v:v,w[d.item]=w[d.item]?w[d.item]+v:v,a.required_clean[d.item]&&a.required[d.item]>0&&n[d.item]>=a.required_clean[d.item]&&(D=!0);break}return p.push({id:N,stamina:T,total_stamina:E,drops:w}),D}}function V(t,c){return i(t)&&U(t).name[c]!==void 0}return{data:q,get:U,name:L,stamina:h,memoryPiece:B,drops:Q,subdrops:X,isNormal:z,isHard:b,isVeryHard:m,isEvent:j,getChapter:J,getNumber:x,getMaxChapter:u,exists:i,build:f,build2:M,search:I,checkForItem:A,estimate:o,existsInRegion:V,questSimulator:C}})();class e{}Z(e,"is_init"),Z(e,"user_state"),Z(e,"force_no_localstorage"),Z(e,"projects",{}),Z(e,"create_project_ignored_rarities");const Y=(()=>{function q(){if(!Q()){if(B()){localStorage.getItem($.legacy_localstorage_key)?(console.log("importing old settings"),U()):localStorage.getItem($.localstorage_key)===null?(console.log("init new user"),e.user_state=JSON.parse(JSON.stringify($.default_user_state)),h()):(console.log("loading user from localstorage"),e.user_state=JSON.parse(localStorage.getItem($.localstorage_key))),e.is_init=!0;return}console.warn("localstorage is not supported on this browser, using basic state"),e.user_state=JSON.parse(JSON.stringify($.default_user_state)),e.is_init=!0}}function U(){var M;const i=JSON.parse(localStorage.getItem($.legacy_localstorage_key));e.user_state=JSON.parse(JSON.stringify($.default_user_state));for(const _ in i.character){const I=i.character[_];e.user_state.character[_]={...I,id:_}}e.user_state.inventory=i.inventory;for(const _ of i.projects){let I={};_.details.ignored_rarity&&(I=JSON.parse(JSON.stringify(_.details.ignored_rarity)),delete _.details.ignored_rarity),e.user_state.projects[_.date]={type:_.type,date:parseInt(_.date),priority:_.priority,details:{..._.details,ignored_rarities:I,...!_.details.memory_piece&&{memory_piece:0},...!_.details.pure_memory_piece&&{pure_memory_piece:0}},required:_.required}}e.user_state.settings.region=i.settings.region;let f={};i.settings.quest.ignored_rarity&&(f=JSON.parse(JSON.stringify(i.settings.quest.ignored_rarity)),delete i.settings.quest.ignored_rarity),e.user_state.settings.quest=i.settings.quest,e.user_state.settings.quest.ignored_rarities=f,(M=e.user_state.settings.quest.chapter)!=null&&M.max&&ne.getMaxChapter()<i.settings.quest.chapter.max&&(e.user_state.settings.quest.chapter.max=ne.getMaxChapter(),e.user_state.settings.quest.chapter.min&&e.user_state.settings.quest.chapter.min>e.user_state.settings.quest.chapter.max&&(e.user_state.settings.quest.chapter.min=e.user_state.settings.quest.chapter.max)),h(),localStorage.removeItem($.legacy_localstorage_key)}function L(){return e.user_state||q(),e.user_state}function h(){if(!B()){console.log("local storage not supported, cant save");return}localStorage.setItem($.localstorage_key,JSON.stringify(e.user_state)),console.log("saved user state",e.user_state)}function B(){return typeof Storage<"u"&&!e.force_no_localstorage}function Q(){return e.is_init}function X(){return e.projects}function z(){e.force_no_localstorage=!e.force_no_localstorage}const b=(()=>{function i(o){e.user_state.inventory=o,h()}function f(o,C){C<=0?delete e.user_state.inventory[o]:e.user_state.inventory[o]=C>=$.inventory.max.fragment?$.inventory.max.fragment:C,h()}function M(){return e.user_state.inventory}function _(o){return e.user_state.inventory[o]||0}function I(o,C){f(o,_(o)+C)}function A(o){delete e.user_state.inventory[o],h()}return{set:i,setAmount:f,get:M,getAmount:_,remove:A,addAmount:I}})(),m=(()=>{function i(o){e.user_state.character=o,h()}function f(){return e.user_state.character}function M(o,C,V){e.user_state.character={...e.user_state.character,[o]:e.user_state.character[o]||{id:o},[o]:{...e.user_state.character[o],rank:C,equipment:V}},h()}function _(o){return e.user_state.character[o]}function I(o){return e.user_state.character[o]!==void 0}function A(o){I(o)&&(delete e.user_state.character[o],h())}return{set:i,get:f,setCharacter:M,getCharacter:_,exists:I,remove:A}})(),j=(()=>{function i(s,K){e.user_state.settings={...e.user_state.settings,[s]:K},h()}function f(s){e.user_state.settings=s,h()}function M(){return e.user_state.settings}function _(){return e.user_state.settings.hide_content||!1}function I(s){i("hide_content",s)}function A(){return e.user_state.settings.compact_project_cards||!1}function o(s){i("compact_project_cards",s)}function C(){return e.user_state.settings.auto_enable_projects||!1}function V(s){i("auto_enable_projects",s)}function t(){return e.user_state.settings.keep_enabled_projects!==void 0&&e.user_state.settings.keep_enabled_projects.enabled}function c(s){if(!e.user_state.settings.keep_enabled_projects||s){let K={};for(const F in e.projects)e.projects[F].enabled&&(K[`${e.projects[F].project.date}`]=!0);i("keep_enabled_projects",{enabled:!0,projects:K});return}delete e.user_state.settings.keep_enabled_projects,h()}function l(s){e.user_state.settings.keep_enabled_projects&&(e.user_state.settings.keep_enabled_projects.projects=s,h())}function r(){return e.user_state.settings.keep_enabled_projects?e.user_state.settings.keep_enabled_projects.projects:{}}function n(){return e.user_state.settings.inventory_alternative_mode||!1}function a(s){i("inventory_alternative_mode",s)}function p(){return e.user_state.settings.simulator_stamina_overlay||!1}function E(s){i("simulator_stamina_overlay",s)}function O(){return e.user_state.settings.simulator_dont_use_inventory||!1}function g(s){i("simulator_dont_use_inventory",s)}function S(){return e.user_state.settings.project_sort||void 0}function R(){return e.user_state.settings.session_ignored_rarities||{}}function N(){i("session_ignored_rarities",e.create_project_ignored_rarities)}function k(){return e.user_state.settings.display_all_project||!1}function D(s){i("display_all_project",s)}function v(){return e.user_state.settings.all_project_first||!1}function T(s){i("all_project_first",s)}const w=(()=>{function s(){return e.user_state.settings.quest||(e.user_state.settings.quest={}),e.user_state.settings.quest}function K(){return s()}function F(y,P){const W=s();W.chapter={min:y,max:P,auto_max:P===ne.getMaxChapter()},h()}function d(){return s().chapter}function ee(y){const P=s();if(P.disabled_difficulty||(P.disabled_difficulty={}),P.disabled_difficulty[y]){delete P.disabled_difficulty[y],h();return}P.disabled_difficulty[y]=!0,h()}function se(){return s().disabled_difficulty}function ie(y){var P;return((P=se())==null?void 0:P[y])||!1}function oe(y){const P=s();P.item_filter=y,h()}function ae(){return s().item_filter||[]}function ce(y,P){const W=s();if(W.drop_buff||(W.drop_buff={}),P===1){delete W.drop_buff[y],h();return}W.drop_buff[y]=P,h()}function ue(y){var W;return((W=s().drop_buff)==null?void 0:W[y])||1}function fe(){const y=s();if(y.sort||(y.sort={}),y.sort.list){delete y.sort.list,h();return}y.sort.list=!0,h()}function le(){var P;return((P=s().sort)==null?void 0:P.list)||!1}function de(){const y=s();if(y.sort||(y.sort={}),y.sort.score){delete y.sort.score,h();return}y.sort.score=!0,h()}function _e(){var P;return((P=s().sort)==null?void 0:P.score)||!1}function me(y){const P=s();if(P.ignored_rarities||(P.ignored_rarities={}),P.ignored_rarities[y]){delete P.ignored_rarities[y],h();return}P.ignored_rarities[y]=!0,h()}function pe(y){var W;return((W=s().ignored_rarities)==null?void 0:W[y])||!1}return{get:K,setChapterRange:F,getChapterRange:d,disableDifficulty:ee,getDisabledDifficulties:se,isDisabledDifficulty:ie,setItemFilter:oe,getItemFilter:ae,setDropBuff:ce,getDropBuff:ue,toggleListSort:fe,getListSort:le,toggleScoreSort:de,getScoreSort:_e,ignoreRarity:me,isRarityIgnored:pe}})();return{set:i,setAll:f,get:M,hideContent:_,setHideContent:I,isCompactProjectCards:A,setCompactProjectCards:o,isAutoEnableProjects:C,setAutoEnableProjects:V,isInventoryAlternativeMode:n,setInventoryAlternativeMode:a,isSimulatorStaminaOverlay:p,setSimulatorStaminaOverlay:E,isSimulatorDontUseInventory:O,setSimulatorDontUseInventory:g,getProjectSortOptions:S,getSavedSessionIgnoredRarities:R,setSavedSessionIgnoredRarities:N,isDisplayAllProject:k,setDisplayAllProject:D,isAllProjectFirst:v,setAllProjectFirst:T,isKeepEnabledProjects:t,setKeepEnabledProjectsEnabledState:c,setKeepEnabledProjectsEnabledProjects:l,getKeepEnabledProjectsEnabledProjects:r,quest:w}})(),J=(()=>{function i(o){e.user_state.projects=o,h()}function f(){return e.user_state.projects}function M(o){e.user_state.projects[o.date||Date.now()]=o,h()}function _(o,C){e.user_state.projects[o]&&(e.user_state.projects[o]=C,h())}function I(o){delete e.user_state.projects[o],h()}function A(o,C={}){if(!e.user_state.projects[o.date])return;let V=C.consume?G.consume(o,b.get(),j.get().region,o.details.ignored_rarities):b.get();if(C.save&&o.type==="character"){const t=o.details.avatar_id,c=m.get();m.set({...c,[t]:{id:t,rank:o.details.end.rank,equipment:o.details.end.equipment}}),b.set(V),I(o.date);return}b.set(V),I(o.date)}return{set:i,get:f,add:M,replace:_,delete:I,complete:A}})(),x=(()=>{function i(M){e.user_state.settings.region=M,h()}function f(){return e.user_state.settings.region||"UNKNOWN"}return{set:i,get:f}})();function u(){return e.create_project_ignored_rarities||(e.create_project_ignored_rarities=j.getSavedSessionIgnoredRarities()),e.create_project_ignored_rarities}return{init:q,get:L,save:h,isInit:Q,_toggle_localstorage:z,getSessionProjects:X,getSessionIgnoredRarities:u,inventory:b,character:m,settings:j,projects:J,region:x}})();export{G as p,ne as q,Y as u};
