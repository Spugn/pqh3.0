var he=Object.defineProperty;var qe=(q,U,L)=>U in q?he(q,U,{enumerable:!0,configurable:!0,writable:!0,value:L}):q[U]=L;var ee=(q,U,L)=>(qe(q,typeof U!="symbol"?U+"":U,L),L);import{f as te,c as E,g as be}from"./tslib.es6-f3f155a9.js";import{e as H}from"./equipment.api-b34fd5a2.js";const Y=(()=>{function q(b,m,j="UNKNOWN",J={}){const x=JSON.parse(JSON.stringify(m)),u={};for(const l in b.required)s(l,b.required[l]);return u;function s(l,P){const _=H.recipe(l,j),I=H.fragmentID(l);if(x[l]&&!J[H.rarity(l)]){if(u[l]=P-x[l],u[l]<=0){u[l]=P,x[l]-=P;return}u[l]=x[l],P-=x[l],x[l]=0}if(!J[H.rarity(l)]&&_.required_pieces>0&&(u[I]=_.required_pieces*P+(u[I]||0)),!J[H.rarity(l)])for(const C of _.required_items)s(C,P)}}function U(b,m,j="UNKNOWN",J={},x=!1){const u=`api.project#check: (${j} | ${b.date})`;x||console.time(u);const s=q(b,m,j,J),l=JSON.parse(JSON.stringify(s));for(const P in s)s[P]-=m[P]||0,s[P]<=0&&delete s[P];return x||console.timeEnd(u),{success:Object.keys(s).length<=0,remaining:s,recipe:l}}function L(b,m,j="UNKNOWN",J={}){const x=`api.project#consume: (${j} | ${b.date})`;console.time(x);const u=JSON.parse(JSON.stringify(m)),s=q(b,m,j,J);for(const l in s)u[l]-=s[l],(u[l]<=0||isNaN(u[l]))&&delete u[l];return console.timeEnd(x),u}function h(b){const m={};for(const j of b)for(const J in j.required)m[J]=(m[J]||0)+j.required[J];return m}function B(b,m,j="UNKNOWN",J={}){const x=U(b,m,j,J),u={progress:-1,items:{current:0,max:0},fragments:{current:0,max:0},check:x};for(const s in x.recipe)u.items.max++,u.fragments.max+=x.recipe[s];if(x.success)return u.progress=100,u.items.current=u.items.max,u.fragments.current=u.fragments.max,u;for(const s in x.remaining)u.items.current++,u.fragments.current+=x.remaining[s];return u.items.current=u.items.max-u.items.current,u.fragments.current=u.fragments.max-u.fragments.current,u.progress=parseFloat((u.fragments.current/u.fragments.max*100).toFixed(2)),u}function Q(b,m,j,J={},x=!0){var l,P;let u;x?u=Z.character.get():u={};let s=[];for(const _ of b){let I=function(){let t={},a;for(let r=C;r<=m;r++)for(let n=0;n<6;n++){if(a=te.equipment(_,r)[n]||E.placeholder_id,a===E.placeholder_id){R[n]=!1;continue}if(C===m)!i[n]&&R[n]&&d();else if(r===m&&R[n])d();else if(r<m){if(r===C&&i[n])continue;d()}}return t;function d(){t[a]=t[a]?t[a]+1:1}};const C=((l=u[_])==null?void 0:l.rank)||1;if(C>m)continue;const i=((P=u[_])==null?void 0:P.equipment)||[!1,!1,!1,!1,!1,!1];let R=[!1,!1,!1,!1,!1,!1];if(C===m){let t=0;for(let a=0;a<6;a++){if(i[a]){R[a]=!0;continue}j[a]&&(R[a]=!0,t++)}if(t<=0)continue}else{if(C+1===m&&i.filter(Boolean).length===6&&j.filter(Boolean).length===0)continue;R=j}const V={type:"character",date:Date.now()+b.indexOf(_),priority:!1,details:{avatar_id:_,formal_name:`${te.name(_,Z.region.get())} (${_})`,name:"",start:{rank:C,equipment:i},end:{rank:m,equipment:R},memory_piece:0,pure_memory_piece:0,ignored_rarities:J},required:I()};Object.keys(V.required).length<=0||s.push(V)}if(s.length>=2){const _={type:"character",date:Date.now()+s.length,priority:!1,details:{avatar_id:E.placeholder_id,formal_name:"All Projects",name:"",start:{rank:1,equipment:[!1,!1,!1,!1,!1,!1]},end:{rank:1,equipment:[!1,!1,!1,!1,!1,!1]},memory_piece:0,pure_memory_piece:0,ignored_rarities:J},required:{}};for(const I of s)for(const C in I.required)_.required[C]=(_.required[C]||0)+I.required[C];s.unshift(_)}return s}function X(b=0){const m={};if(b>0)for(let s=0;s<b&&Object.keys(m).length<b;s++)m[H.getRandomItem()]=10;const j=te.getRandomCharacter(),J=Math.floor(Math.random()*te.getMaxRank())+1,x=Math.floor(Math.random()*J)+1;return{type:"character",date:Date.now(),priority:!1,details:{avatar_id:j.id,formal_name:`${j.name.JP} (${j.id})`,name:j.name.JP,start:{rank:x,equipment:u()},end:{rank:J,equipment:u()},memory_piece:0,pure_memory_piece:0,ignored_rarities:{1:Math.random()<.5,2:Math.random()<.5,3:Math.random()<.5,4:Math.random()<.5,5:Math.random()<.5,6:Math.random()<.5,7:Math.random()<.5,8:Math.random()<.5}},required:m};function u(){return[Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5]}}function G(b=0){const m={};if(b>0)for(let j=0;j<b&&Object.keys(m).length<b;j++)m[H.getRandomItem()]=10;return{type:"item",date:Date.now(),priority:!1,details:{name:"Untitled Project",ignored_rarities:{1:Math.random()<.5,2:Math.random()<.5,3:Math.random()<.5,4:Math.random()<.5,5:Math.random()<.5,6:Math.random()<.5,7:Math.random()<.5,8:Math.random()<.5}},required:m}}return{build:q,check:U,consume:L,compile:h,progress:B,bulkCreateProjects:Q,getTestCharacterProject:X,getTestItemProject:G}})();class re{}ee(re,"max_chapter",-1);const ne=(()=>{const q=be.quest;function U(t){return q[t]}function L(t,a){var d,r,n,o,p;if(q[t])return a?((n=(r=q[t])==null?void 0:r.name)==null?void 0:n[a])||((p=(o=q[t])==null?void 0:o.name)==null?void 0:p.JP):(d=q[t])==null?void 0:d.name}function h(t,a){var d,r,n,o,p;if(q[t])return a?((n=(r=q[t])==null?void 0:r.stamina)==null?void 0:n[a])||((p=(o=q[t])==null?void 0:o.stamina)==null?void 0:p.JP):(d=q[t])==null?void 0:d.stamina}function B(t,a){var n,o;const d=(n=q[t])==null?void 0:n.drop_table[a],r=d?d.memory_piece:(o=q[t])==null?void 0:o.drop_table.JP.memory_piece;return r&&r.item!==E.placeholder_id?r:void 0}function Q(t,a){var n,o;const d=(n=q[t])==null?void 0:n.drop_table[a];return(d?d.drops:(o=q[t])==null?void 0:o.drop_table.JP.drops)||[]}function X(t,a){var n,o;const d=(n=q[t])==null?void 0:n.drop_table[a];return(d?d.subdrops:(o=q[t])==null?void 0:o.drop_table.JP.subdrops)||[]}function G(t){return t!==""&&!t.includes(E.difficulty.hard)&&!t.includes(E.difficulty.event)}function b(t){return t.includes(E.difficulty.hard)&&!t.includes(E.difficulty.very_hard)}function m(t){return t.includes(E.difficulty.very_hard)}function j(t){return t.includes(E.difficulty.event)}function J(t){return parseInt(t.split("-")[0])}function x(t){return parseInt(t.split("-")[1])}function u(){if(re.max_chapter===-1){let t=-1;for(const a in q){const d=J(a);t=Math.max(t,d)}re.max_chapter=t}return re.max_chapter}function s(t){return q[t]!==void 0}function l({all_projects:t,compiled_items:a,inventory:d,settings:r={},use_inventory:n=!1,language:o="UNKNOWN"}){const p=`api.quest#build: (${o} | ${Date.now().toLocaleString()})`;console.time(p);let A,O;if(n){const D=Y.check({date:"quest-build",required:a},d,o,r.ignored_rarities);A=D.remaining,O=D.recipe}else A=O=Y.build({date:"quest-build",required:a},{},o,r.ignored_rarities);if(Object.keys(A).length<=0)return console.log("can't make quest list with no required items"),console.timeEnd(p),{required:A,required_clean:O,quest_scores:[],priority_items:[],priority_amount:{}};let g=new Set,S={};for(const D of t)if(D.priority)for(const v in D.required)H.exists(v)&&(g.add(v),S[v]=(S[v]||0)+D.required[v]);const K=Array.from(g).reduce((D,v)=>(D[v]=S[v],D),{});S=Y.build({date:"quest-build",required:K},{},o,{});const N=Object.keys(S),k=I({required:A,priority_items:N,priority_levels:{},settings:r,language:o});return console.timeEnd(p),{required:A,required_clean:O,quest_scores:k,priority_items:N,priority_amount:S}}function P({session_projects:t,inventory:a,settings:d,use_inventory:r=!1,language:n,silent:o=!1}){var $;a||(a=Z.inventory.get()),d||(d=Z.settings.quest.get()),n||(n=Z.region.get());const p=`api.quest#build2: (${n} | ${Date.now().toLocaleString()})`;o||console.time(p);const A=Object.keys(t).filter(F=>t[F].enabled).map(F=>t[F].project),O=Y.compile(A);let g,S;if(r){const F=Y.check({date:"quest-build-with-inventory",required:O},a,n,d.ignored_rarities,o);g=F.remaining,S=F.recipe}else g=S=Y.build({date:"quest-build-no-inventory",required:O},{},n,d.ignored_rarities);if(Object.keys(g).length<=0)return o||(console.log("can't make quest list with no required items"),console.timeEnd(p)),{required:g,required_clean:S,quest_scores:[],priority_items:[],priority_amount:{},projects:A};let K={},N=new Set,k={};for(const F in t){const c=t[F].project;if(c.priority)for(const f in c.required){if(!H.exists(f))continue;const z=(($=c.details)==null?void 0:$.priority_level)||2;K[f]=K[f]&&K[f]>z?K[f]:z,N.add(f),k[f]=(k[f]||0)+c.required[f]}}const D=Array.from(N).reduce((F,c)=>(F[c]=k[c],F),{}),v=_(D,K,n),T=Object.keys(v.priority_amount),w=I({required:g,priority_items:T,priority_levels:v.priority_levels,settings:d,language:n});return o||console.timeEnd(p),{required:g,required_clean:S,quest_scores:w,priority_items:T,priority_amount:k,projects:A}}function _(t,a,d="UNKNOWN"){const r={},n={};for(const p in t)o(p,t[p],a[p]);return{priority_amount:r,priority_levels:n};function o(p,A,O){const g=H.recipe(p,d),S=H.fragmentID(p);g.required_pieces>0&&(r[S]=g.required_pieces*A+(r[S]||0),n[S]=n[S]&&n[S]>O?n[S]:O);for(const K of g.required_items)o(K,A,O)}}function I({required:t,priority_items:a,priority_levels:d,settings:r={},language:n="UNKNOWN"}){var p,A,O;let o=[];for(const g in q){let S=function(k){if(!k||!t.hasOwnProperty(k.item))return 0;let D=k.drop_rate;return D*=a.includes(k.item)?d[k.item]:1,D+=t[k.item]/E.inventory.max.fragment*1e3,D};const K=J(g);if(r.chapter&&(K<r.chapter.min||K>r.chapter.max)||r.disabled_difficulty&&(r.disabled_difficulty.Normal&&G(g)||r.disabled_difficulty.Hard&&b(g)||r.disabled_difficulty["Very Hard"]&&m(g)||r.disabled_difficulty.Event&&j(g)))continue;if(r.item_filter&&r.item_filter.length>0){let k=!1;for(const D of r.item_filter)if(C(D,g,n)){k=!0;break}if(!k)continue}let N=0;N+=S(B(g,n));for(const k of Q(g,n))N+=S(k);for(const k of X(g,n))N+=S(k);if(G(g)&&((p=r==null?void 0:r.drop_buff)!=null&&p.Normal)&&(N*=r.drop_buff.Normal),b(g)&&((A=r==null?void 0:r.drop_buff)!=null&&A.Hard)&&(N*=r.drop_buff.Hard),m(g)&&((O=r==null?void 0:r.drop_buff)!=null&&O["Very Hard"])&&(N*=r.drop_buff["Very Hard"]),N>0){const k=h(g,n);typeof k=="number"&&(N/=k),o.push({id:g,score:+N.toFixed(2)})}}return o.sort((g,S)=>{const K={id:g.id,chapter:J(g.id),number:x(g.id),value:0},N={id:S.id,chapter:J(S.id),number:x(S.id),value:0};function k(w){m(w.id)&&(w.value+=2e3),(b(w.id)||j(w.id))&&(w.value+=1e3),w.value+=w.chapter*1e4+w.number*10}function D(w,$){return w-$}function v(w,$){return $-w}k(K),k(N);let T=r.sort&&r.sort.score?D(g.score,S.score):v(g.score,S.score);return T!==0?T:r.sort&&r.sort.list?v(K.value,N.value):D(K.value,N.value)}),o}function C(t,a,d){let r,n;if(H.exists(t)?(r=t,n=H.fragment(t)):(r=H.convertFragmentID(t),n=t),r===E.placeholder_id)return!1;const o=B(a,d);if((o==null?void 0:o.item)===r)return!0;for(const p of Q(a,d))if(p.item===r||p.item===n)return!0;for(const p of X(a,d))if(p.item===r||p.item===n)return!0;return!1}function i(t){console.time("quest.estimate");const d=Y.build({required:t},{});let r=0;for(const n in q){let o=function(p){const A=B(n,"JP");if(A&&d.hasOwnProperty(A.item))return++p;for(const O of Q(n,"JP"))if(d.hasOwnProperty(O.item))return++p;for(const O of X(n,"JP"))if(d.hasOwnProperty(O.item))return++p;return p};if(r>=100)break;r=o(r)}return console.timeEnd("quest.estimate"),r}function R(t,a={normal_drop:1,hard_drop:1,very_hard_drop:1,use_inventory:!0,precise:!1},d=void 0){const r=`api.quest#questSimulator: (${Date.now().toLocaleString()};precise:${a.precise||!1})`;console.time(r);let n;a.use_inventory?n=JSON.parse(JSON.stringify(Z.inventory.get())):n={};let o;d?o=JSON.parse(JSON.stringify(d)):o=S();let p=[],A=0,O={};const g=JSON.parse(JSON.stringify(o.required));for(;o.quest_scores.length>0;){const N=K(o.quest_scores[0].id,Z.region.get());(a.precise||N)&&(o=S())}return console.timeEnd(r),{stamina:A,quests:p,total_drops:O,required:g};function S(){return P({session_projects:t,inventory:n,use_inventory:!0,silent:!0,settings:Z.settings.quest.get()})}function K(N,k){let D=!1;const v=j(N)?1:m(N)?a.very_hard_drop||1:b(N)?a.hard_drop||1:G(N)&&a.normal_drop||1,T=h(N,k),w={};A+=T;const $=B(N,k);$&&Math.random()*100<=$.drop_rate&&(n[$.item]=n[$.item]?n[$.item]+v:v,O[$.item]=O[$.item]?O[$.item]+v:v,w[$.item]=w[$.item]?w[$.item]+v:v,o.required_clean[$.item]&&o.required[$.item]>0&&n[$.item]>=o.required_clean[$.item]&&(D=!0));for(const f of Q(N,k)){if(f.item===E.placeholder_id)continue;Math.random()*100<=f.drop_rate&&(n[f.item]=n[f.item]?n[f.item]+v:v,O[f.item]=O[f.item]?O[f.item]+v:v,w[f.item]=w[f.item]?w[f.item]+v:v,o.required_clean[f.item]&&o.required[f.item]>0&&n[f.item]>=o.required_clean[f.item]&&(D=!0))}const F=Math.random()*100;let c=0;for(const f of X(N,k))if(f.item!==E.placeholder_id&&(c+=f.drop_rate,F<=c)){n[f.item]=n[f.item]?n[f.item]+v:v,O[f.item]=O[f.item]?O[f.item]+v:v,w[f.item]=w[f.item]?w[f.item]+v:v,o.required_clean[f.item]&&o.required[f.item]>0&&n[f.item]>=o.required_clean[f.item]&&(D=!0);break}return p.push({id:N,stamina:T,total_stamina:A,drops:w}),D}}function V(t,a){return s(t)&&U(t).name[a]!==void 0}return{data:q,get:U,name:L,stamina:h,memoryPiece:B,drops:Q,subdrops:X,isNormal:G,isHard:b,isVeryHard:m,isEvent:j,getChapter:J,getNumber:x,getMaxChapter:u,exists:s,build:l,build2:P,search:I,checkForItem:C,estimate:i,existsInRegion:V,questSimulator:R}})();class e{}ee(e,"is_init"),ee(e,"user_state"),ee(e,"force_no_localstorage"),ee(e,"projects",{}),ee(e,"create_project_ignored_rarities");const Z=(()=>{function q(){if(!Q()){if(B()){localStorage.getItem(E.legacy_localstorage_key)?(console.log("importing old settings"),U()):localStorage.getItem(E.localstorage_key)===null?(console.log("init new user"),e.user_state=JSON.parse(JSON.stringify(E.default_user_state)),h()):(console.log("loading user from localstorage"),e.user_state=JSON.parse(localStorage.getItem(E.localstorage_key))),e.is_init=!0;return}console.warn("localstorage is not supported on this browser, using basic state"),e.user_state=JSON.parse(JSON.stringify(E.default_user_state)),e.is_init=!0}}function U(){var P;const s=JSON.parse(localStorage.getItem(E.legacy_localstorage_key));e.user_state=JSON.parse(JSON.stringify(E.default_user_state));for(const _ in s.character){const I=s.character[_];e.user_state.character[_]={...I,id:_}}e.user_state.inventory=s.inventory;for(const _ of s.projects){let I={};_.details.ignored_rarity&&(I=JSON.parse(JSON.stringify(_.details.ignored_rarity)),delete _.details.ignored_rarity),e.user_state.projects[_.date]={type:_.type,date:parseInt(_.date),priority:_.priority,details:{..._.details,ignored_rarities:I,...!_.details.memory_piece&&{memory_piece:0},...!_.details.pure_memory_piece&&{pure_memory_piece:0}},required:_.required}}e.user_state.settings.region=s.settings.region;let l={};s.settings.quest.ignored_rarity&&(l=JSON.parse(JSON.stringify(s.settings.quest.ignored_rarity)),delete s.settings.quest.ignored_rarity),e.user_state.settings.quest=s.settings.quest,e.user_state.settings.quest.ignored_rarities=l,(P=e.user_state.settings.quest.chapter)!=null&&P.max&&ne.getMaxChapter()<s.settings.quest.chapter.max&&(e.user_state.settings.quest.chapter.max=ne.getMaxChapter(),e.user_state.settings.quest.chapter.min&&e.user_state.settings.quest.chapter.min>e.user_state.settings.quest.chapter.max&&(e.user_state.settings.quest.chapter.min=e.user_state.settings.quest.chapter.max)),h(),localStorage.removeItem(E.legacy_localstorage_key)}function L(){return e.user_state||q(),e.user_state}function h(){if(!B()){console.log("local storage not supported, cant save");return}localStorage.setItem(E.localstorage_key,JSON.stringify(e.user_state)),console.log("saved user state",e.user_state)}function B(){return typeof Storage<"u"&&!e.force_no_localstorage}function Q(){return e.is_init}function X(){return e.projects}function G(){e.force_no_localstorage=!e.force_no_localstorage}const b=(()=>{function s(i){e.user_state.inventory=i,h()}function l(i,R){R<=0?delete e.user_state.inventory[i]:e.user_state.inventory[i]=R>=E.inventory.max.fragment?E.inventory.max.fragment:R,h()}function P(){return e.user_state.inventory}function _(i){return e.user_state.inventory[i]||0}function I(i,R){l(i,_(i)+R)}function C(i){delete e.user_state.inventory[i],h()}return{set:s,setAmount:l,get:P,getAmount:_,remove:C,addAmount:I}})(),m=(()=>{function s(i){e.user_state.character=i,h()}function l(){return e.user_state.character}function P(i,R,V){e.user_state.character={...e.user_state.character,[i]:e.user_state.character[i]||{id:i},[i]:{...e.user_state.character[i],rank:R,equipment:V}},h()}function _(i){return e.user_state.character[i]}function I(i){return e.user_state.character[i]!==void 0}function C(i){I(i)&&(delete e.user_state.character[i],h())}return{set:s,get:l,setCharacter:P,getCharacter:_,exists:I,remove:C}})(),j=(()=>{function s(c,f){e.user_state.settings={...e.user_state.settings,[c]:f},h()}function l(c){e.user_state.settings=c,h()}function P(){return e.user_state.settings}function _(){return e.user_state.settings.hide_content||!1}function I(c){s("hide_content",c)}function C(){return e.user_state.settings.compact_project_cards||!1}function i(c){s("compact_project_cards",c)}function R(){return e.user_state.settings.auto_enable_projects||!1}function V(c){s("auto_enable_projects",c)}function t(){return e.user_state.settings.keep_enabled_projects!==void 0&&e.user_state.settings.keep_enabled_projects.enabled}function a(c){if(!e.user_state.settings.keep_enabled_projects||c){let f={};for(const z in e.projects)e.projects[z].enabled&&(f[`${e.projects[z].project.date}`]=!0);s("keep_enabled_projects",{enabled:!0,projects:f});return}delete e.user_state.settings.keep_enabled_projects,h()}function d(c){e.user_state.settings.keep_enabled_projects&&(e.user_state.settings.keep_enabled_projects.projects=c,h())}function r(){return e.user_state.settings.keep_enabled_projects?e.user_state.settings.keep_enabled_projects.projects:{}}function n(){return e.user_state.settings.inventory_alternative_mode||!1}function o(c){s("inventory_alternative_mode",c)}function p(){return e.user_state.settings.simulator_stamina_overlay||!1}function A(c){s("simulator_stamina_overlay",c)}function O(){return e.user_state.settings.simulator_dont_use_inventory||!1}function g(c){s("simulator_dont_use_inventory",c)}function S(){return e.user_state.settings.project_sort||void 0}function K(){return e.user_state.settings.session_ignored_rarities||{}}function N(){s("session_ignored_rarities",e.create_project_ignored_rarities)}function k(){return e.user_state.settings.display_all_project||!1}function D(c){s("display_all_project",c)}function v(){return e.user_state.settings.all_project_first||!1}function T(c){s("all_project_first",c)}function w(){return e.user_state.settings.all_project_ignored_rarities||{}}function $(c){s("all_project_ignored_rarities",c)}const F=(()=>{function c(){return e.user_state.settings.quest||(e.user_state.settings.quest={}),e.user_state.settings.quest}function f(){return c()}function z(y,M){const W=c();W.chapter={min:y,max:M,auto_max:M===ne.getMaxChapter()},h()}function ie(){return c().chapter}function oe(y){const M=c();if(M.disabled_difficulty||(M.disabled_difficulty={}),M.disabled_difficulty[y]){delete M.disabled_difficulty[y],h();return}M.disabled_difficulty[y]=!0,h()}function se(){return c().disabled_difficulty}function ae(y){var M;return((M=se())==null?void 0:M[y])||!1}function ce(y){const M=c();M.item_filter=y,h()}function ue(){return c().item_filter||[]}function fe(y,M){const W=c();if(W.drop_buff||(W.drop_buff={}),M===1){delete W.drop_buff[y],h();return}W.drop_buff[y]=M,h()}function le(y){var W;return((W=c().drop_buff)==null?void 0:W[y])||1}function de(){const y=c();if(y.sort||(y.sort={}),y.sort.list){delete y.sort.list,h();return}y.sort.list=!0,h()}function _e(){var M;return((M=c().sort)==null?void 0:M.list)||!1}function me(){const y=c();if(y.sort||(y.sort={}),y.sort.score){delete y.sort.score,h();return}y.sort.score=!0,h()}function pe(){var M;return((M=c().sort)==null?void 0:M.score)||!1}function ge(y){const M=c();if(M.ignored_rarities||(M.ignored_rarities={}),M.ignored_rarities[y]){delete M.ignored_rarities[y],h();return}M.ignored_rarities[y]=!0,h()}function ye(y){var W;return((W=c().ignored_rarities)==null?void 0:W[y])||!1}return{get:f,setChapterRange:z,getChapterRange:ie,disableDifficulty:oe,getDisabledDifficulties:se,isDisabledDifficulty:ae,setItemFilter:ce,getItemFilter:ue,setDropBuff:fe,getDropBuff:le,toggleListSort:de,getListSort:_e,toggleScoreSort:me,getScoreSort:pe,ignoreRarity:ge,isRarityIgnored:ye}})();return{set:s,setAll:l,get:P,hideContent:_,setHideContent:I,isCompactProjectCards:C,setCompactProjectCards:i,isAutoEnableProjects:R,setAutoEnableProjects:V,isInventoryAlternativeMode:n,setInventoryAlternativeMode:o,isSimulatorStaminaOverlay:p,setSimulatorStaminaOverlay:A,isSimulatorDontUseInventory:O,setSimulatorDontUseInventory:g,getProjectSortOptions:S,getSavedSessionIgnoredRarities:K,setSavedSessionIgnoredRarities:N,isDisplayAllProject:k,setDisplayAllProject:D,isAllProjectFirst:v,setAllProjectFirst:T,getAllProjectIgnoredRarities:w,setAllProjectIgnoredRarities:$,isKeepEnabledProjects:t,setKeepEnabledProjectsEnabledState:a,setKeepEnabledProjectsEnabledProjects:d,getKeepEnabledProjectsEnabledProjects:r,quest:F}})(),J=(()=>{function s(i){e.user_state.projects=i,h()}function l(){return e.user_state.projects}function P(i){e.user_state.projects[i.date||Date.now()]=i,h()}function _(i,R){e.user_state.projects[i]&&(e.user_state.projects[i]=R,h())}function I(i){delete e.user_state.projects[i],h()}function C(i,R={}){if(!e.user_state.projects[i.date])return;let V=R.consume?Y.consume(i,b.get(),j.get().region,i.details.ignored_rarities):b.get();if(R.save&&i.type==="character"){const t=i.details.avatar_id,a=m.get();m.set({...a,[t]:{id:t,rank:i.details.end.rank,equipment:i.details.end.equipment}}),b.set(V),I(i.date);return}b.set(V),I(i.date)}return{set:s,get:l,add:P,replace:_,delete:I,complete:C}})(),x=(()=>{function s(P){e.user_state.settings.region=P,h()}function l(){return e.user_state.settings.region||"UNKNOWN"}return{set:s,get:l}})();function u(){return e.create_project_ignored_rarities||(e.create_project_ignored_rarities=j.getSavedSessionIgnoredRarities()),e.create_project_ignored_rarities}return{init:q,get:L,save:h,isInit:Q,_toggle_localstorage:G,getSessionProjects:X,getSessionIgnoredRarities:u,inventory:b,character:m,settings:j,projects:J,region:x}})();export{Y as p,ne as q,Z as u};
