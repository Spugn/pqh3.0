var de=Object.defineProperty;var _e=(b,U,V)=>U in b?de(b,U,{enumerable:!0,configurable:!0,writable:!0,value:V}):b[U]=V;var Z=(b,U,V)=>(_e(b,typeof U!="symbol"?U+"":U,V),V);import{f as te,c as A,g as me}from"./tslib.es6-002590ef.js";import{e as H}from"./equipment.api-8a7ec542.js";const G=(()=>{function b(v,m,j="UNKNOWN",J={}){const P=JSON.parse(JSON.stringify(m)),u={};for(const f in v.required)i(f,v.required[f]);return u;function i(f,M){const _=H.recipe(f,j),I=H.fragmentID(f);if(P[f]&&!J[H.rarity(f)]){if(u[f]=M-P[f],u[f]<=0){u[f]=M,P[f]-=M;return}u[f]=P[f],M-=P[f],P[f]=0}if(!J[H.rarity(f)]&&_.required_pieces>0&&(u[I]=_.required_pieces*M+(u[I]||0)),!J[H.rarity(f)])for(const E of _.required_items)i(E,M)}}function U(v,m,j="UNKNOWN",J={},P=!1){const u=`api.project#check: (${j} | ${v.date})`;P||console.time(u);const i=b(v,m,j,J),f=JSON.parse(JSON.stringify(i));for(const M in i)i[M]-=m[M]||0,i[M]<=0&&delete i[M];return P||console.timeEnd(u),{success:Object.keys(i).length<=0,remaining:i,recipe:f}}function V(v,m,j="UNKNOWN",J={}){const P=`api.project#consume: (${j} | ${v.date})`;console.time(P);const u=JSON.parse(JSON.stringify(m)),i=b(v,m,j,J);for(const f in i)u[f]-=i[f],(u[f]<=0||isNaN(u[f]))&&delete u[f];return console.timeEnd(P),u}function q(v){const m={};for(const j of v)for(const J in j.required)m[J]=(m[J]||0)+j.required[J];return m}function Q(v,m,j="UNKNOWN",J={}){const P=U(v,m,j,J),u={progress:-1,items:{current:0,max:0},fragments:{current:0,max:0},check:P};for(const i in P.recipe)u.items.max++,u.fragments.max+=P.recipe[i];if(P.success)return u.progress=100,u.items.current=u.items.max,u.fragments.current=u.fragments.max,u;for(const i in P.remaining)u.items.current++,u.fragments.current+=P.remaining[i];return u.items.current=u.items.max-u.items.current,u.fragments.current=u.fragments.max-u.fragments.current,u.progress=parseFloat((u.fragments.current/u.fragments.max*100).toFixed(2)),u}function T(v,m,j,J={},P=!0){var f,M;let u;P?u=Y.character.get():u={};let i=[];for(const _ of v){let I=function(){let t={},c;for(let r=E;r<=m;r++)for(let n=0;n<6;n++){if(c=te.equipment(_,r)[n]||A.placeholder_id,c===A.placeholder_id){C[n]=!1;continue}if(E===m)!o[n]&&C[n]&&l();else if(r===m&&C[n])l();else if(r<m){if(r===E&&o[n])continue;l()}}return t;function l(){t[c]=t[c]?t[c]+1:1}};const E=((f=u[_])==null?void 0:f.rank)||1;if(E>m)continue;const o=((M=u[_])==null?void 0:M.equipment)||[!1,!1,!1,!1,!1,!1];let C=[!1,!1,!1,!1,!1,!1];if(E===m){let t=0;for(let c=0;c<6;c++){if(o[c]){C[c]=!0;continue}j[c]&&(C[c]=!0,t++)}if(t<=0)continue}else{if(E+1===m&&o.filter(Boolean).length===6&&j.filter(Boolean).length===0)continue;C=j}const B={type:"character",date:Date.now()+v.indexOf(_),priority:!1,details:{avatar_id:_,formal_name:`${te.name(_,Y.region.get())} (${_})`,name:"",start:{rank:E,equipment:o},end:{rank:m,equipment:C},memory_piece:0,pure_memory_piece:0,ignored_rarities:J},required:I()};Object.keys(B.required).length<=0||i.push(B)}if(i.length>=2){const _={type:"character",date:Date.now()+i.length,priority:!1,details:{avatar_id:"999999",formal_name:"All Projects",name:"",start:{rank:1,equipment:[!1,!1,!1,!1,!1,!1]},end:{rank:1,equipment:[!1,!1,!1,!1,!1,!1]},memory_piece:0,pure_memory_piece:0,ignored_rarities:J},required:{}};for(const I of i)for(const E in I.required)_.required[E]=(_.required[E]||0)+I.required[E];i.unshift(_)}return i}function X(v=0){const m={};if(v>0)for(let i=0;i<v&&Object.keys(m).length<v;i++)m[H.getRandomItem()]=10;const j=te.getRandomCharacter(),J=Math.floor(Math.random()*te.getMaxRank())+1,P=Math.floor(Math.random()*J)+1;return{type:"character",date:Date.now(),priority:!1,details:{avatar_id:j.id,formal_name:`${j.name.JP} (${j.id})`,name:j.name.JP,start:{rank:P,equipment:u()},end:{rank:J,equipment:u()},memory_piece:0,pure_memory_piece:0,ignored_rarities:{1:Math.random()<.5,2:Math.random()<.5,3:Math.random()<.5,4:Math.random()<.5,5:Math.random()<.5,6:Math.random()<.5,7:Math.random()<.5,8:Math.random()<.5}},required:m};function u(){return[Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.5]}}function z(v=0){const m={};if(v>0)for(let j=0;j<v&&Object.keys(m).length<v;j++)m[H.getRandomItem()]=10;return{type:"item",date:Date.now(),priority:!1,details:{name:"Untitled Project",ignored_rarities:{1:Math.random()<.5,2:Math.random()<.5,3:Math.random()<.5,4:Math.random()<.5,5:Math.random()<.5,6:Math.random()<.5,7:Math.random()<.5,8:Math.random()<.5}},required:m}}return{build:b,check:U,consume:V,compile:q,progress:Q,bulkCreateProjects:T,getTestCharacterProject:X,getTestItemProject:z}})();class re{}Z(re,"max_chapter",-1);const ne=(()=>{const b=me.quest;function U(t){return b[t]}function V(t,c){var l,r,n,a,g;if(b[t])return c?((n=(r=b[t])==null?void 0:r.name)==null?void 0:n[c])||((g=(a=b[t])==null?void 0:a.name)==null?void 0:g.JP):(l=b[t])==null?void 0:l.name}function q(t,c){var l,r,n,a,g;if(b[t])return c?((n=(r=b[t])==null?void 0:r.stamina)==null?void 0:n[c])||((g=(a=b[t])==null?void 0:a.stamina)==null?void 0:g.JP):(l=b[t])==null?void 0:l.stamina}function Q(t,c){var n,a;const l=(n=b[t])==null?void 0:n.drop_table[c],r=l?l.memory_piece:(a=b[t])==null?void 0:a.drop_table.JP.memory_piece;return r&&r.item!==A.placeholder_id?r:void 0}function T(t,c){var n,a;const l=(n=b[t])==null?void 0:n.drop_table[c];return(l?l.drops:(a=b[t])==null?void 0:a.drop_table.JP.drops)||[]}function X(t,c){var n,a;const l=(n=b[t])==null?void 0:n.drop_table[c];return(l?l.subdrops:(a=b[t])==null?void 0:a.drop_table.JP.subdrops)||[]}function z(t){return t!==""&&!t.includes(A.difficulty.hard)&&!t.includes(A.difficulty.event)}function v(t){return t.includes(A.difficulty.hard)&&!t.includes(A.difficulty.very_hard)}function m(t){return t.includes(A.difficulty.very_hard)}function j(t){return t.includes(A.difficulty.event)}function J(t){return parseInt(t.split("-")[0])}function P(t){return parseInt(t.split("-")[1])}function u(){if(re.max_chapter===-1){let t=-1;for(const c in b){const l=J(c);t=Math.max(t,l)}re.max_chapter=t}return re.max_chapter}function i(t){return b[t]!==void 0}function f({all_projects:t,compiled_items:c,inventory:l,settings:r={},use_inventory:n=!1,language:a="UNKNOWN"}){const g=`api.quest#build: (${a} | ${Date.now().toLocaleString()})`;console.time(g);let w,O;if(n){const s=G.check({date:"quest-build",required:c},l,a,r.ignored_rarities);w=s.remaining,O=s.recipe}else w=O=G.build({date:"quest-build",required:c},{},a,r.ignored_rarities);if(Object.keys(w).length<=0)return console.log("can't make quest list with no required items"),console.timeEnd(g),{required:w,required_clean:O,quest_scores:[],priority_items:[],priority_amount:{}};let y=new Set,S={};for(const s of t)if(s.priority)for(const p in s.required)H.exists(p)&&(y.add(p),S[p]=(S[p]||0)+s.required[p]);const R=Array.from(y).reduce((s,p)=>(s[p]=S[p],s),{});S=G.build({date:"quest-build",required:R},{},a,{});const N=Object.keys(S),k=I({required:w,priority_items:N,priority_levels:{},settings:r,language:a});return console.timeEnd(g),{required:w,required_clean:O,quest_scores:k,priority_items:N,priority_amount:S}}function M({session_projects:t,inventory:c,settings:l,use_inventory:r=!1,language:n,silent:a=!1}){var $;c||(c=Y.inventory.get()),l||(l=Y.settings.quest.get()),n||(n=Y.region.get());const g=`api.quest#build2: (${n} | ${Date.now().toLocaleString()})`;a||console.time(g);const w=Object.keys(t).filter(K=>t[K].enabled).map(K=>t[K].project),O=G.compile(w);let y,S;if(r){const K=G.check({date:"quest-build-with-inventory",required:O},c,n,l.ignored_rarities,a);y=K.remaining,S=K.recipe}else y=S=G.build({date:"quest-build-no-inventory",required:O},{},n,l.ignored_rarities);if(Object.keys(y).length<=0)return a||(console.log("can't make quest list with no required items"),console.timeEnd(g)),{required:y,required_clean:S,quest_scores:[],priority_items:[],priority_amount:{},projects:w};let R={},N=new Set,k={};for(const K in t){const F=t[K].project;if(F.priority)for(const d in F.required){if(!H.exists(d))continue;const ee=(($=F.details)==null?void 0:$.priority_level)||2;R[d]=R[d]&&R[d]>ee?R[d]:ee,N.add(d),k[d]=(k[d]||0)+F.required[d]}}const s=Array.from(N).reduce((K,F)=>(K[F]=k[F],K),{}),p=_(s,R,n),W=Object.keys(p.priority_amount),D=I({required:y,priority_items:W,priority_levels:p.priority_levels,settings:l,language:n});return a||console.timeEnd(g),{required:y,required_clean:S,quest_scores:D,priority_items:W,priority_amount:k,projects:w}}function _(t,c,l="UNKNOWN"){const r={},n={};for(const g in t)a(g,t[g],c[g]);return{priority_amount:r,priority_levels:n};function a(g,w,O){const y=H.recipe(g,l),S=H.fragmentID(g);y.required_pieces>0&&(r[S]=y.required_pieces*w+(r[S]||0),n[S]=n[S]&&n[S]>O?n[S]:O);for(const R of y.required_items)a(R,w,O)}}function I({required:t,priority_items:c,priority_levels:l,settings:r={},language:n="UNKNOWN"}){var g,w,O;let a=[];for(const y in b){let S=function(k){if(!k||!t.hasOwnProperty(k.item))return 0;let s=k.drop_rate;return s*=c.includes(k.item)?l[k.item]:1,s+=t[k.item]/A.inventory.max.fragment*1e3,s};const R=J(y);if(r.chapter&&(R<r.chapter.min||R>r.chapter.max)||r.disabled_difficulty&&(r.disabled_difficulty.Normal&&z(y)||r.disabled_difficulty.Hard&&v(y)||r.disabled_difficulty["Very Hard"]&&m(y)||r.disabled_difficulty.Event&&j(y)))continue;if(r.item_filter&&r.item_filter.length>0){let k=!1;for(const s of r.item_filter)if(E(s,y,n)){k=!0;break}if(!k)continue}let N=0;N+=S(Q(y,n));for(const k of T(y,n))N+=S(k);for(const k of X(y,n))N+=S(k);if(z(y)&&((g=r==null?void 0:r.drop_buff)!=null&&g.Normal)&&(N*=r.drop_buff.Normal),v(y)&&((w=r==null?void 0:r.drop_buff)!=null&&w.Hard)&&(N*=r.drop_buff.Hard),m(y)&&((O=r==null?void 0:r.drop_buff)!=null&&O["Very Hard"])&&(N*=r.drop_buff["Very Hard"]),N>0){const k=q(y,n);typeof k=="number"&&(N/=k),a.push({id:y,score:+N.toFixed(2)})}}return a.sort((y,S)=>{const R={id:y.id,chapter:J(y.id),number:P(y.id),value:0},N={id:S.id,chapter:J(S.id),number:P(S.id),value:0};function k(D){m(D.id)&&(D.value+=2e3),(v(D.id)||j(D.id))&&(D.value+=1e3),D.value+=D.chapter*1e4+D.number*10}function s(D,$){return D-$}function p(D,$){return $-D}k(R),k(N);let W=r.sort&&r.sort.score?s(y.score,S.score):p(y.score,S.score);return W!==0?W:r.sort&&r.sort.list?p(R.value,N.value):s(R.value,N.value)}),a}function E(t,c,l){let r,n;if(H.exists(t)?(r=t,n=H.fragment(t)):(r=H.convertFragmentID(t),n=t),r===A.placeholder_id)return!1;const a=Q(c,l);if((a==null?void 0:a.item)===r)return!0;for(const g of T(c,l))if(g.item===r||g.item===n)return!0;for(const g of X(c,l))if(g.item===r||g.item===n)return!0;return!1}function o(t){console.time("quest.estimate");const l=G.build({required:t},{});let r=0;for(const n in b){let a=function(g){const w=Q(n,"JP");if(w&&l.hasOwnProperty(w.item))return++g;for(const O of T(n,"JP"))if(l.hasOwnProperty(O.item))return++g;for(const O of X(n,"JP"))if(l.hasOwnProperty(O.item))return++g;return g};if(r>=100)break;r=a(r)}return console.timeEnd("quest.estimate"),r}function C(t,c={normal_drop:1,hard_drop:1,very_hard_drop:1,use_inventory:!0,precise:!1},l=void 0){const r=`api.quest#questSimulator: (${Date.now().toLocaleString()};precise:${c.precise||!1})`;console.time(r);let n;c.use_inventory?n=JSON.parse(JSON.stringify(Y.inventory.get())):n={};let a;l?a=JSON.parse(JSON.stringify(l)):a=S();let g=[],w=0,O={};const y=JSON.parse(JSON.stringify(a.required));for(;a.quest_scores.length>0;){const N=R(a.quest_scores[0].id,Y.region.get());(c.precise||N)&&(a=S())}return console.timeEnd(r),{stamina:w,quests:g,total_drops:O,required:y};function S(){return M({session_projects:t,inventory:n,use_inventory:!0,silent:!0,settings:Y.settings.quest.get()})}function R(N,k){let s=!1;const p=j(N)?1:m(N)?c.very_hard_drop||1:v(N)?c.hard_drop||1:z(N)&&c.normal_drop||1,W=q(N,k),D={};w+=W;const $=Q(N,k);$&&Math.random()*100<=$.drop_rate&&(n[$.item]=n[$.item]?n[$.item]+p:p,O[$.item]=O[$.item]?O[$.item]+p:p,D[$.item]=D[$.item]?D[$.item]+p:p,a.required_clean[$.item]&&a.required[$.item]>0&&n[$.item]>=a.required_clean[$.item]&&(s=!0));for(const d of T(N,k)){if(d.item===A.placeholder_id)continue;Math.random()*100<=d.drop_rate&&(n[d.item]=n[d.item]?n[d.item]+p:p,O[d.item]=O[d.item]?O[d.item]+p:p,D[d.item]=D[d.item]?D[d.item]+p:p,a.required_clean[d.item]&&a.required[d.item]>0&&n[d.item]>=a.required_clean[d.item]&&(s=!0))}const K=Math.random()*100;let F=0;for(const d of X(N,k))if(d.item!==A.placeholder_id&&(F+=d.drop_rate,K<=F)){n[d.item]=n[d.item]?n[d.item]+p:p,O[d.item]=O[d.item]?O[d.item]+p:p,D[d.item]=D[d.item]?D[d.item]+p:p,a.required_clean[d.item]&&a.required[d.item]>0&&n[d.item]>=a.required_clean[d.item]&&(s=!0);break}return g.push({id:N,stamina:W,total_stamina:w,drops:D}),s}}function B(t,c){return i(t)&&U(t).name[c]!==void 0}return{data:b,get:U,name:V,stamina:q,memoryPiece:Q,drops:T,subdrops:X,isNormal:z,isHard:v,isVeryHard:m,isEvent:j,getChapter:J,getNumber:P,getMaxChapter:u,exists:i,build:f,build2:M,search:I,checkForItem:E,estimate:o,existsInRegion:B,questSimulator:C}})();class e{}Z(e,"is_init"),Z(e,"user_state"),Z(e,"force_no_localstorage"),Z(e,"projects",{}),Z(e,"create_project_ignored_rarities");const Y=(()=>{function b(){if(!T()){if(Q()){localStorage.getItem(A.legacy_localstorage_key)?(console.log("importing old settings"),U()):localStorage.getItem(A.localstorage_key)===null?(console.log("init new user"),e.user_state=JSON.parse(JSON.stringify(A.default_user_state)),q()):(console.log("loading user from localstorage"),e.user_state=JSON.parse(localStorage.getItem(A.localstorage_key))),e.is_init=!0;return}console.warn("localstorage is not supported on this browser, using basic state"),e.user_state=JSON.parse(JSON.stringify(A.default_user_state)),e.is_init=!0}}function U(){var M;const i=JSON.parse(localStorage.getItem(A.legacy_localstorage_key));e.user_state=JSON.parse(JSON.stringify(A.default_user_state));for(const _ in i.character){const I=i.character[_];e.user_state.character[_]={...I,id:_}}e.user_state.inventory=i.inventory;for(const _ of i.projects){let I={};_.details.ignored_rarity&&(I=JSON.parse(JSON.stringify(_.details.ignored_rarity)),delete _.details.ignored_rarity),e.user_state.projects[_.date]={type:_.type,date:parseInt(_.date),priority:_.priority,details:{..._.details,ignored_rarities:I,...!_.details.memory_piece&&{memory_piece:0},...!_.details.pure_memory_piece&&{pure_memory_piece:0}},required:_.required}}e.user_state.settings.region=i.settings.region;let f={};i.settings.quest.ignored_rarity&&(f=JSON.parse(JSON.stringify(i.settings.quest.ignored_rarity)),delete i.settings.quest.ignored_rarity),e.user_state.settings.quest=i.settings.quest,e.user_state.settings.quest.ignored_rarities=f,(M=e.user_state.settings.quest.chapter)!=null&&M.max&&ne.getMaxChapter()<i.settings.quest.chapter.max&&(e.user_state.settings.quest.chapter.max=ne.getMaxChapter(),e.user_state.settings.quest.chapter.min&&e.user_state.settings.quest.chapter.min>e.user_state.settings.quest.chapter.max&&(e.user_state.settings.quest.chapter.min=e.user_state.settings.quest.chapter.max)),q(),localStorage.removeItem(A.legacy_localstorage_key)}function V(){return e.user_state||b(),e.user_state}function q(){if(!Q()){console.log("local storage not supported, cant save");return}localStorage.setItem(A.localstorage_key,JSON.stringify(e.user_state)),console.log("saved user state",e.user_state)}function Q(){return typeof Storage<"u"&&!e.force_no_localstorage}function T(){return e.is_init}function X(){return e.projects}function z(){e.force_no_localstorage=!e.force_no_localstorage}const v=(()=>{function i(o){e.user_state.inventory=o,q()}function f(o,C){C<=0?delete e.user_state.inventory[o]:e.user_state.inventory[o]=C>=A.inventory.max.fragment?A.inventory.max.fragment:C,q()}function M(){return e.user_state.inventory}function _(o){return e.user_state.inventory[o]||0}function I(o,C){f(o,_(o)+C)}function E(o){delete e.user_state.inventory[o],q()}return{set:i,setAmount:f,get:M,getAmount:_,remove:E,addAmount:I}})(),m=(()=>{function i(o){e.user_state.character=o,q()}function f(){return e.user_state.character}function M(o,C,B){e.user_state.character={...e.user_state.character,[o]:e.user_state.character[o]||{id:o},[o]:{...e.user_state.character[o],rank:C,equipment:B}},q()}function _(o){return e.user_state.character[o]}function I(o){return e.user_state.character[o]!==void 0}function E(o){I(o)&&(delete e.user_state.character[o],q())}return{set:i,get:f,setCharacter:M,getCharacter:_,exists:I,remove:E}})(),j=(()=>{function i(s,p){e.user_state.settings={...e.user_state.settings,[s]:p},q()}function f(s){e.user_state.settings=s,q()}function M(){return e.user_state.settings}function _(){return e.user_state.settings.hide_content||!1}function I(s){i("hide_content",s)}function E(){return e.user_state.settings.compact_project_cards||!1}function o(s){i("compact_project_cards",s)}function C(){return e.user_state.settings.auto_enable_projects||!1}function B(s){i("auto_enable_projects",s)}function t(){return e.user_state.settings.keep_enabled_projects!==void 0&&e.user_state.settings.keep_enabled_projects.enabled}function c(s){if(!e.user_state.settings.keep_enabled_projects||s){let p={};for(const W in e.projects)e.projects[W].enabled&&(p[`${e.projects[W].project.date}`]=!0);i("keep_enabled_projects",{enabled:!0,projects:p});return}delete e.user_state.settings.keep_enabled_projects,q()}function l(s){e.user_state.settings.keep_enabled_projects&&(e.user_state.settings.keep_enabled_projects.projects=s,q())}function r(){return e.user_state.settings.keep_enabled_projects?e.user_state.settings.keep_enabled_projects.projects:{}}function n(){return e.user_state.settings.inventory_alternative_mode||!1}function a(s){i("inventory_alternative_mode",s)}function g(){return e.user_state.settings.simulator_stamina_overlay||!1}function w(s){i("simulator_stamina_overlay",s)}function O(){return e.user_state.settings.simulator_dont_use_inventory||!1}function y(s){i("simulator_dont_use_inventory",s)}function S(){return e.user_state.settings.project_sort||void 0}function R(){return e.user_state.settings.session_ignored_rarities||{}}function N(){i("session_ignored_rarities",e.create_project_ignored_rarities)}const k=(()=>{function s(){return e.user_state.settings.quest||(e.user_state.settings.quest={}),e.user_state.settings.quest}function p(){return s()}function W(h,x){const L=s();L.chapter={min:h,max:x,auto_max:x===ne.getMaxChapter()},q()}function D(){return s().chapter}function $(h){const x=s();if(x.disabled_difficulty||(x.disabled_difficulty={}),x.disabled_difficulty[h]){delete x.disabled_difficulty[h],q();return}x.disabled_difficulty[h]=!0,q()}function K(){return s().disabled_difficulty}function F(h){var x;return((x=K())==null?void 0:x[h])||!1}function d(h){const x=s();x.item_filter=h,q()}function ee(){return s().item_filter||[]}function se(h,x){const L=s();if(L.drop_buff||(L.drop_buff={}),x===1){delete L.drop_buff[h],q();return}L.drop_buff[h]=x,q()}function ie(h){var L;return((L=s().drop_buff)==null?void 0:L[h])||1}function oe(){const h=s();if(h.sort||(h.sort={}),h.sort.list){delete h.sort.list,q();return}h.sort.list=!0,q()}function ae(){var x;return((x=s().sort)==null?void 0:x.list)||!1}function ce(){const h=s();if(h.sort||(h.sort={}),h.sort.score){delete h.sort.score,q();return}h.sort.score=!0,q()}function ue(){var x;return((x=s().sort)==null?void 0:x.score)||!1}function fe(h){const x=s();if(x.ignored_rarities||(x.ignored_rarities={}),x.ignored_rarities[h]){delete x.ignored_rarities[h],q();return}x.ignored_rarities[h]=!0,q()}function le(h){var L;return((L=s().ignored_rarities)==null?void 0:L[h])||!1}return{get:p,setChapterRange:W,getChapterRange:D,disableDifficulty:$,getDisabledDifficulties:K,isDisabledDifficulty:F,setItemFilter:d,getItemFilter:ee,setDropBuff:se,getDropBuff:ie,toggleListSort:oe,getListSort:ae,toggleScoreSort:ce,getScoreSort:ue,ignoreRarity:fe,isRarityIgnored:le}})();return{set:i,setAll:f,get:M,hideContent:_,setHideContent:I,isCompactProjectCards:E,setCompactProjectCards:o,isAutoEnableProjects:C,setAutoEnableProjects:B,isInventoryAlternativeMode:n,setInventoryAlternativeMode:a,isSimulatorStaminaOverlay:g,setSimulatorStaminaOverlay:w,isSimulatorDontUseInventory:O,setSimulatorDontUseInventory:y,getProjectSortOptions:S,getSavedSessionIgnoredRarities:R,setSavedSessionIgnoredRarities:N,isKeepEnabledProjects:t,setKeepEnabledProjectsEnabledState:c,setKeepEnabledProjectsEnabledProjects:l,getKeepEnabledProjectsEnabledProjects:r,quest:k}})(),J=(()=>{function i(o){e.user_state.projects=o,q()}function f(){return e.user_state.projects}function M(o){e.user_state.projects[o.date||Date.now()]=o,q()}function _(o,C){e.user_state.projects[o]&&(e.user_state.projects[o]=C,q())}function I(o){delete e.user_state.projects[o],q()}function E(o,C={}){if(!e.user_state.projects[o.date])return;let B=C.consume?G.consume(o,v.get(),j.get().region,o.details.ignored_rarities):v.get();if(C.save&&o.type==="character"){const t=o.details.avatar_id,c=m.get();m.set({...c,[t]:{id:t,rank:o.details.end.rank,equipment:o.details.end.equipment}}),v.set(B),I(o.date);return}v.set(B),I(o.date)}return{set:i,get:f,add:M,replace:_,delete:I,complete:E}})(),P=(()=>{function i(M){e.user_state.settings.region=M,q()}function f(){return e.user_state.settings.region||"UNKNOWN"}return{set:i,get:f}})();function u(){return e.create_project_ignored_rarities||(console.log("loading session ignored rarities"),e.create_project_ignored_rarities=j.getSavedSessionIgnoredRarities()),e.create_project_ignored_rarities}return{init:b,get:V,save:q,isInit:T,_toggle_localstorage:z,getSessionProjects:X,getSessionIgnoredRarities:u,inventory:v,character:m,settings:j,projects:J,region:P}})();export{G as p,ne as q,Y as u};
