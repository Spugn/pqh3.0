import{S as ye,i as be,s as we,k as b,a as A,q as x,am as Ee,l as w,h as u,c as q,m as j,r as D,n as y,G as s,b as B,u as se,t as R,d as te,f as P,o as ke,g as re,B as z,I as ae,w as W,x as X,y as K,z as Z,p as ie}from"../../../chunks/index-0cc2ee10.js";import{b as $e}from"../../../chunks/paths-b4419565.js";import{M as je,c as Ie,B as xe,a as De,C as Se,b as Ae}from"../../../chunks/MiniProjectTitle-a50d7cb3.js";import{u as ee}from"../../../chunks/user.api-66cd07e7.js";function ce(m,e,r){const n=m.slice();return n[20]=e[r],n}function fe(m,e,r){const n=m.slice();return n[23]=e[r],n}function ue(m,e,r){const n=m.slice();return n[26]=e[r],n}function qe(m){let e,r,n,d,o,c,i,t,_,l,p,a,h,f,g;return{c(){e=b("div"),r=b("strong"),n=x("Failed to import legacy data"),d=A(),o=b("small"),c=x("No importable data was found."),i=A(),t=b("small"),_=x("Only "),l=b("strong"),p=x("Inventory"),a=x(" and "),h=b("strong"),f=x("Projects"),g=x(" can be converted and imported from legacy data."),this.h()},l(v){e=w(v,"DIV",{class:!0});var k=j(e);r=w(k,"STRONG",{});var T=j(r);n=D(T,"Failed to import legacy data"),T.forEach(u),d=q(k),o=w(k,"SMALL",{});var L=j(o);c=D(L,"No importable data was found."),L.forEach(u),i=q(k),t=w(k,"SMALL",{});var H=j(t);_=D(H,"Only "),l=w(H,"STRONG",{});var C=j(l);p=D(C,"Inventory"),C.forEach(u),a=D(H," and "),h=w(H,"STRONG",{});var Y=j(h);f=D(Y,"Projects"),Y.forEach(u),g=D(H," can be converted and imported from legacy data."),H.forEach(u),k.forEach(u),this.h()},h(){y(e,"class","flex flex-col justify-center items-center")},m(v,k){B(v,e,k),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c),s(e,i),s(e,t),s(t,_),s(t,l),s(l,p),s(t,a),s(t,h),s(h,f),s(t,g)},p:z,i:z,o:z,d(v){v&&u(e)}}}function Te(m){let e,r,n,d,o,c;return{c(){e=b("div"),r=b("strong"),n=x("Failed to import data"),d=A(),o=b("small"),c=x("Refresh the page and try again or try again at a later date."),this.h()},l(i){e=w(i,"DIV",{class:!0});var t=j(e);r=w(t,"STRONG",{});var _=j(r);n=D(_,"Failed to import data"),_.forEach(u),d=q(t),o=w(t,"SMALL",{});var l=j(o);c=D(l,"Refresh the page and try again or try again at a later date."),l.forEach(u),t.forEach(u),this.h()},h(){y(e,"class","flex flex-col justify-center items-center")},m(i,t){B(i,e,t),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c)},p:z,i:z,o:z,d(i){i&&u(e)}}}function Ne(m){let e,r,n,d,o,c,i,t;const _=[Oe,Pe],l=[];function p(v,k){return v[4]?0:1}r=p(m),n=l[r]=_[r](m);let a=m[8].length>0&&Re(m),h=m[6].length>0&&Ce(m),f=m[7].length>0&&Ge(m),g=m[5]&&_e(m);return{c(){e=b("section"),n.c(),d=A(),a&&a.c(),o=A(),h&&h.c(),c=A(),f&&f.c(),i=A(),g&&g.c(),this.h()},l(v){e=w(v,"SECTION",{class:!0});var k=j(e);n.l(k),d=q(k),a&&a.l(k),o=q(k),h&&h.l(k),c=q(k),f&&f.l(k),i=q(k),g&&g.l(k),k.forEach(u),this.h()},h(){y(e,"class","flex flex-col gap-1 pb-40 mx-4 justify-center items-center text-black")},m(v,k){B(v,e,k),l[r].m(e,null),s(e,d),a&&a.m(e,null),s(e,o),h&&h.m(e,null),s(e,c),f&&f.m(e,null),s(e,i),g&&g.m(e,null),t=!0},p(v,k){let T=r;r=p(v),r===T?l[r].p(v,k):(re(),R(l[T],1,1,()=>{l[T]=null}),te(),n=l[r],n?n.p(v,k):(n=l[r]=_[r](v),n.c()),P(n,1),n.m(e,d)),v[8].length>0&&a.p(v,k),v[6].length>0&&h.p(v,k),v[7].length>0&&f.p(v,k),v[5]?g?g.p(v,k):(g=_e(v),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(v){t||(P(n),P(a),P(h),P(f),t=!0)},o(v){R(n),R(a),R(h),R(f),t=!1},d(v){v&&u(e),l[r].d(),a&&a.d(),h&&h.d(),f&&f.d(),g&&g.d()}}}function Pe(m){let e,r,n,d,o,c,i,t,_,l,p,a,h;return o=new De({props:{variant:"raised",class:"w-full",$$slots:{default:[Ve]},$$scope:{ctx:m}}}),o.$on("click",m[10]),{c(){e=b("div"),r=b("div"),n=x("Are you sure you want to import?"),d=A(),W(o.$$.fragment),c=A(),i=b("div"),t=b("span"),_=x("Your existing data will be replaced on this browser if you continue."),l=A(),p=b("span"),a=x("Make sure everything below is correct before proceeding."),this.h()},l(f){e=w(f,"DIV",{class:!0});var g=j(e);r=w(g,"DIV",{class:!0});var v=j(r);n=D(v,"Are you sure you want to import?"),v.forEach(u),d=q(g),X(o.$$.fragment,g),c=q(g),i=w(g,"DIV",{class:!0});var k=j(i);t=w(k,"SPAN",{class:!0});var T=j(t);_=D(T,"Your existing data will be replaced on this browser if you continue."),T.forEach(u),l=q(k),p=w(k,"SPAN",{class:!0});var L=j(p);a=D(L,"Make sure everything below is correct before proceeding."),L.forEach(u),k.forEach(u),g.forEach(u),this.h()},h(){y(r,"class","text-2xl text-yellow-300 font-bold text-center text-shadow py-4 svelte-1ei8749"),y(t,"class","text-red-400"),y(p,"class","italic"),y(i,"class","text-white font-bold text-center text-shadow pt-4 pb-8 flex flex-col gap-1 svelte-1ei8749"),y(e,"class","w-full")},m(f,g){B(f,e,g),s(e,r),s(r,n),s(e,d),K(o,e,null),s(e,c),s(e,i),s(i,t),s(t,_),s(i,l),s(i,p),s(p,a),h=!0},p(f,g){const v={};g&536870912&&(v.$$scope={dirty:g,ctx:f}),o.$set(v)},i(f){h||(P(o.$$.fragment,f),h=!0)},o(f){R(o.$$.fragment,f),h=!1},d(f){f&&u(e),Z(o)}}}function Oe(m){let e,r,n,d,o,c,i,t,_,l,p,a,h,f,g,v;return{c(){e=b("div"),r=b("strong"),n=x("Data Import Complete!"),d=A(),o=b("small"),c=x("You can now close this page or return to the main page."),i=A(),t=b("a"),_=b("span"),l=x("home"),p=A(),a=b("span"),h=x("Home Page"),f=A(),g=b("span"),v=x("launch"),this.h()},l(k){e=w(k,"DIV",{class:!0});var T=j(e);r=w(T,"STRONG",{class:!0});var L=j(r);n=D(L,"Data Import Complete!"),L.forEach(u),d=q(T),o=w(T,"SMALL",{});var H=j(o);c=D(H,"You can now close this page or return to the main page."),H.forEach(u),i=q(T),t=w(T,"A",{href:!0,class:!0,style:!0});var C=j(t);_=w(C,"SPAN",{class:!0});var Y=j(_);l=D(Y,"home"),Y.forEach(u),p=q(C),a=w(C,"SPAN",{});var I=j(a);h=D(I,"Home Page"),I.forEach(u),f=q(C),g=w(C,"SPAN",{class:!0});var F=j(g);v=D(F,"launch"),F.forEach(u),C.forEach(u),T.forEach(u),this.h()},h(){y(r,"class","block text-3xl text-center"),y(_,"class","material-icons"),y(g,"class","material-icons"),y(t,"href",$e+"/"),y(t,"class","flex flex-row justify-center items-center mt-4 gap-2"),ie(t,"color","inherit"),ie(t,"text-decoration","none"),y(e,"class","flex flex-col gap-1 py-5 justify-center items-center text-white text-shadow svelte-1ei8749")},m(k,T){B(k,e,T),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c),s(e,i),s(e,t),s(t,_),s(_,l),s(t,p),s(t,a),s(a,h),s(t,f),s(t,g),s(g,v)},p:z,i:z,o:z,d(k){k&&u(e)}}}function Le(m){let e;return{c(){e=x("done")},l(r){e=D(r,"done")},m(r,n){B(r,e,n)},d(r){r&&u(e)}}}function Me(m){let e;return{c(){e=x("Import Data")},l(r){e=D(r,"Import Data")},m(r,n){B(r,e,n)},d(r){r&&u(e)}}}function Ve(m){let e,r,n,d;return e=new Se({props:{class:"material-icons",$$slots:{default:[Le]},$$scope:{ctx:m}}}),n=new Ae({props:{$$slots:{default:[Me]},$$scope:{ctx:m}}}),{c(){W(e.$$.fragment),r=A(),W(n.$$.fragment)},l(o){X(e.$$.fragment,o),r=q(o),X(n.$$.fragment,o)},m(o,c){K(e,o,c),B(o,r,c),K(n,o,c),d=!0},p(o,c){const i={};c&536870912&&(i.$$scope={dirty:c,ctx:o}),e.$set(i);const t={};c&536870912&&(t.$$scope={dirty:c,ctx:o}),n.$set(t)},i(o){d||(P(e.$$.fragment,o),P(n.$$.fragment,o),d=!0)},o(o){R(e.$$.fragment,o),R(n.$$.fragment,o),d=!1},d(o){Z(e,o),o&&u(r),Z(n,o)}}}function Re(m){let e,r,n,d,o,c,i,t=m[2]&&de(),_=m[8],l=[];for(let a=0;a<_.length;a+=1)l[a]=pe(ue(m,_,a));const p=a=>R(l[a],1,1,()=>{l[a]=null});return{c(){e=b("div"),r=b("div"),n=x("Projects"),d=A(),t&&t.c(),o=A(),c=b("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var h=j(e);r=w(h,"DIV",{class:!0});var f=j(r);n=D(f,"Projects"),f.forEach(u),d=q(h),t&&t.l(h),o=q(h),c=w(h,"DIV",{class:!0});var g=j(c);for(let v=0;v<l.length;v+=1)l[v].l(g);g.forEach(u),h.forEach(u),this.h()},h(){y(r,"class","category-title svelte-1ei8749"),y(c,"class","flex flex-row justify-start flex-wrap gap-1"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(a,h){B(a,e,h),s(e,r),s(r,n),s(e,d),t&&t.m(e,null),s(e,o),s(e,c);for(let f=0;f<l.length;f+=1)l[f].m(c,null);i=!0},p(a,h){if(a[2]?t||(t=de(),t.c(),t.m(e,o)):t&&(t.d(1),t=null),h&256){_=a[8];let f;for(f=0;f<_.length;f+=1){const g=ue(a,_,f);l[f]?(l[f].p(g,h),P(l[f],1)):(l[f]=pe(g),l[f].c(),P(l[f],1),l[f].m(c,null))}for(re(),f=_.length;f<l.length;f+=1)p(f);te()}},i(a){if(!i){for(let h=0;h<_.length;h+=1)P(l[h]);i=!0}},o(a){l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)R(l[h]);i=!1},d(a){a&&u(e),t&&t.d(),ae(l,a)}}}function de(m){let e,r,n,d,o,c;return{c(){e=b("small"),r=b("span"),n=x("info"),d=A(),o=b("span"),c=x("Legacy projects are converted to Item Projects."),this.h()},l(i){e=w(i,"SMALL",{class:!0});var t=j(e);r=w(t,"SPAN",{class:!0});var _=j(r);n=D(_,"info"),_.forEach(u),d=q(t),o=w(t,"SPAN",{class:!0});var l=j(o);c=D(l,"Legacy projects are converted to Item Projects."),l.forEach(u),t.forEach(u),this.h()},h(){y(r,"class","material-icons"),y(o,"class","relative top-[0.2rem]"),y(e,"class","flex flex-row flex-wrap gap-2 mx-4")},m(i,t){B(i,e,t),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c)},d(i){i&&u(e)}}}function pe(m){let e,r;return e=new je({props:{thumbnail:m[26].thumbnail,project_type:m[26].type,priority:m[26].priority,project_name:m[26].project_name,subtitle:m[26].subtitle,start_rank:m[26].start_rank,end_rank:m[26].end_rank,progress:-1}}),{c(){W(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,d){K(e,n,d),r=!0},p:z,i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){R(e.$$.fragment,n),r=!1},d(n){Z(e,n)}}}function Ce(m){let e,r,n,d,o,c,i=m[6],t=[];for(let l=0;l<i.length;l+=1)t[l]=he(fe(m,i,l));const _=l=>R(t[l],1,1,()=>{t[l]=null});return{c(){e=b("div"),r=b("div"),n=x("Characters"),d=A(),o=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var p=j(e);r=w(p,"DIV",{class:!0});var a=j(r);n=D(a,"Characters"),a.forEach(u),d=q(p),o=w(p,"DIV",{class:!0});var h=j(o);for(let f=0;f<t.length;f+=1)t[f].l(h);h.forEach(u),p.forEach(u),this.h()},h(){y(r,"class","category-title pb-2 svelte-1ei8749"),y(o,"class","flex flex-row justify-start flex-wrap gap-1 pb-3 pl-3"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(l,p){B(l,e,p),s(e,r),s(r,n),s(e,d),s(e,o);for(let a=0;a<t.length;a+=1)t[a].m(o,null);c=!0},p(l,p){if(p&64){i=l[6];let a;for(a=0;a<i.length;a+=1){const h=fe(l,i,a);t[a]?(t[a].p(h,p),P(t[a],1)):(t[a]=he(h),t[a].c(),P(t[a],1),t[a].m(o,null))}for(re(),a=i.length;a<t.length;a+=1)_(a);te()}},i(l){if(!c){for(let p=0;p<i.length;p+=1)P(t[p]);c=!0}},o(l){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)R(t[p]);c=!1},d(l){l&&u(e),ae(t,l)}}}function he(m){let e,r;return e=new Ie({props:{id:m[23].id,rank:m[23].rank}}),{c(){W(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,d){K(e,n,d),r=!0},p:z,i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){R(e.$$.fragment,n),r=!1},d(n){Z(e,n)}}}function Ge(m){let e,r,n,d,o,c,i=m[7],t=[];for(let l=0;l<i.length;l+=1)t[l]=me(ce(m,i,l));const _=l=>R(t[l],1,1,()=>{t[l]=null});return{c(){e=b("div"),r=b("div"),n=x("Inventory"),d=A(),o=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var p=j(e);r=w(p,"DIV",{class:!0});var a=j(r);n=D(a,"Inventory"),a.forEach(u),d=q(p),o=w(p,"DIV",{class:!0});var h=j(o);for(let f=0;f<t.length;f+=1)t[f].l(h);h.forEach(u),p.forEach(u),this.h()},h(){y(r,"class","category-title pb-2 svelte-1ei8749"),y(o,"class","flex flex-row justify-start flex-wrap gap-1 pb-3 pl-3"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(l,p){B(l,e,p),s(e,r),s(r,n),s(e,d),s(e,o);for(let a=0;a<t.length;a+=1)t[a].m(o,null);c=!0},p(l,p){if(p&128){i=l[7];let a;for(a=0;a<i.length;a+=1){const h=ce(l,i,a);t[a]?(t[a].p(h,p),P(t[a],1)):(t[a]=me(h),t[a].c(),P(t[a],1),t[a].m(o,null))}for(re(),a=i.length;a<t.length;a+=1)_(a);te()}},i(l){if(!c){for(let p=0;p<i.length;p+=1)P(t[p]);c=!0}},o(l){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)R(t[p]);c=!1},d(l){l&&u(e),ae(t,l)}}}function me(m){let e,r;return e=new xe({props:{id:m[20].id,amount:m[20].amount}}),{c(){W(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,d){K(e,n,d),r=!0},p:z,i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){R(e.$$.fragment,n),r=!1},d(n){Z(e,n)}}}function _e(m){let e,r,n,d,o,c;return{c(){e=b("div"),r=b("div"),n=x("Settings"),d=A(),o=b("div"),c=b("textarea"),this.h()},l(i){e=w(i,"DIV",{class:!0});var t=j(e);r=w(t,"DIV",{class:!0});var _=j(r);n=D(_,"Settings"),_.forEach(u),d=q(t),o=w(t,"DIV",{class:!0});var l=j(o);c=w(l,"TEXTAREA",{class:!0,rows:!0}),j(c).forEach(u),l.forEach(u),t.forEach(u),this.h()},h(){y(r,"class","category-title pb-2 svelte-1ei8749"),c.disabled=!0,y(c,"class","w-full h-auto"),y(c,"rows","10"),c.value=m[5],y(o,"class","flex flex-row justify-start flex-wrap gap-1 px-3 pb-3"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(i,t){B(i,e,t),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c)},p(i,t){t&32&&(c.value=i[5])},d(i){i&&u(e)}}}function Be(m){let e,r,n,d,o,c,i,t,_,l,p,a,h,f,g=m[2]?"Legacy ":"",v,k,T,L,H,C=m[2]?"Legacy ":"",Y,I,F,S,E,M,V,J;const O=[Ne,Te,qe],G=[];function Q($,N){return!$[1]&&$[0]?0:$[1]?1:$[3]?2:-1}return~(S=Q(m))&&(E=G[S]=O[S](m)),{c(){e=b("meta"),r=b("meta"),n=b("meta"),d=b("meta"),o=b("meta"),c=b("meta"),i=b("meta"),t=b("meta"),_=A(),l=b("div"),p=b("h1"),a=x("Princess Connect! Re:Dive - Quest Helper"),h=A(),f=b("h2"),v=x(g),k=x("Data Import"),T=A(),L=b("h1"),H=x("priconne-quest-helper │ "),Y=x(C),I=x("Data Import"),F=A(),E&&E.c(),M=A(),V=b("section"),this.h()},l($){const N=Ee("svelte-1qc73oa",document.head);e=w(N,"META",{name:!0,content:!0}),r=w(N,"META",{name:!0,content:!0}),n=w(N,"META",{property:!0,content:!0}),d=w(N,"META",{property:!0,content:!0}),o=w(N,"META",{property:!0,content:!0}),c=w(N,"META",{property:!0,content:!0}),i=w(N,"META",{property:!0,content:!0}),t=w(N,"META",{property:!0,content:!0}),N.forEach(u),_=q($),l=w($,"DIV",{class:!0});var U=j(l);p=w(U,"H1",{class:!0});var oe=j(p);a=D(oe,"Princess Connect! Re:Dive - Quest Helper"),oe.forEach(u),h=q(U),f=w(U,"H2",{class:!0});var ne=j(f);v=D(ne,g),k=D(ne,"Data Import"),ne.forEach(u),T=q(U),L=w(U,"H1",{class:!0});var le=j(L);H=D(le,"priconne-quest-helper │ "),Y=D(le,C),I=D(le,"Data Import"),le.forEach(u),U.forEach(u),F=q($),E&&E.l($),M=q($),V=w($,"SECTION",{});var ve=j(V);ve.forEach(u),this.h()},h(){document.title="priconne-quest-helper | Data Import",y(e,"name","title"),y(e,"content","priconne-quest-helper | Data Import"),y(r,"name","description"),y(r,"content","priconne-quest-helper Data Importing - Transfer data between devices!"),y(n,"property","og:title"),y(n,"content","priconne-quest-helper | Data Import"),y(d,"property","og:description"),y(d,"content","priconne-quest-helper Data Importing - Transfer data between devices!"),y(o,"property","og:image"),y(o,"content","https://raw.githubusercontent.com/Spugn/priconne-quest-helper/master/static/logo128.png"),y(c,"property","og:url"),y(c,"content","https://spugn.github.io/priconne-quest-helper/data-import/"),y(i,"property","twitter:title"),y(i,"content","priconne-quest-helper | Data Import"),y(t,"property","twitter:description"),y(t,"content","priconne-quest-helper Data Importing - Transfer data between devices!"),y(p,"class","title text-[5vw] sm:text-3xl svelte-1ei8749"),y(f,"class","title text-[4vw] sm:text-2xl tracking-widest svelte-1ei8749"),y(L,"class","title simple svelte-1ei8749"),y(l,"class","color-aliceblue text-center text-shadow-md font-bold py-3.5 mb-3 text-white")},m($,N){s(document.head,e),s(document.head,r),s(document.head,n),s(document.head,d),s(document.head,o),s(document.head,c),s(document.head,i),s(document.head,t),B($,_,N),B($,l,N),s(l,p),s(p,a),s(l,h),s(l,f),s(f,v),s(f,k),s(l,T),s(l,L),s(L,H),s(L,Y),s(L,I),B($,F,N),~S&&G[S].m($,N),B($,M,N),B($,V,N),J=!0},p($,[N]){(!J||N&4)&&g!==(g=$[2]?"Legacy ":"")&&se(v,g),(!J||N&4)&&C!==(C=$[2]?"Legacy ":"")&&se(Y,C);let U=S;S=Q($),S===U?~S&&G[S].p($,N):(E&&(re(),R(G[U],1,1,()=>{G[U]=null}),te()),~S?(E=G[S],E?E.p($,N):(E=G[S]=O[S]($),E.c()),P(E,1),E.m(M.parentNode,M)):E=null)},i($){J||(P(E),J=!0)},o($){R(E),J=!1},d($){u(e),u(r),u(n),u(d),u(o),u(c),u(i),u(t),$&&u(_),$&&u(l),$&&u(F),~S&&G[S].d($),$&&u(M),$&&u(V)}}}function ge(){return m(window.location.href).id[0];function m(e){let r=e.indexOf("?")+1,n=e.indexOf("#")+1||e.length+1,d=e.slice(r,n-1),o=d.replace(/\+/g," ").split("&"),c={},i,t,_,l;if(!(d===e||d==="")){for(i=0;i<o.length;i++)l=o[i].split("=",2),t=decodeURIComponent(l[0]),_=decodeURIComponent(l[1]),c.hasOwnProperty(t)||(c[t]=[]),c[t].push(l.length===2?_:null);return c}}}function He(m,e,r){ee.init();const n=["b4aj","zMT2","ST2S","dD4f","9GSV","Hxjz","wM2b","2j1k","ghp_","LBF1","8704351629"];let d="",o=!1,c=!1,i=!1,t={},_={},l={},p=!1,a=!1,h=[],f=[],g=[],v;ke(()=>{console.log(ge());for(const I in n[n.length-1])d+=n[parseInt(n[n.length-1][I])];H(ge(),d,k)});function k(I){i?L(I):(_=I,T(I))}function T(I){var F;if(I.character)for(const S in I.character)h.push({id:S,rank:I.character[S].rank});if(I.inventory)for(const S in I.inventory)f.push({id:S,amount:I.inventory[S]});if(I.projects)for(const S in I.projects){const E=I.projects[S];g.push({thumbnail:E.type==="character"?E.details.avatar_id:Object.keys(E.required)[Object.keys(E.required).length*Math.random()<<0],type:E.type||"item",priority:E.priority||!1,project_name:((F=E.details)===null||F===void 0?void 0:F.name)||"Untitled Project",subtitle:E.type==="character"?E.details.formal_name:"Item Project",start_rank:E.type==="character"?E.details.start.rank:-1,end_rank:E.type==="character"?E.details.end.rank:-1})}I.settings&&r(5,v=JSON.stringify(I.settings,null,4)),r(0,o=!0)}function L(I){fetch("https://raw.githubusercontent.com/Expugn/priconne-quest-helper/master/data/equipment_data.json",{method:"GET"}).then(E=>E.json()).then(E=>{console.log(E);for(const M in E){const V=E[M];l[V.name]=M,V.has_fragments&&(l[`${V.name} Fragment`]=V.fragment_id)}if(F(),S(),Object.keys(t).length<=0){r(3,p=!0);return}_=t,T(t),console.log("converted data",t),r(0,o=!0)}).catch(E=>{console.error("failed to get legacy equipment data",E),r(1,c=!0)});function F(){if(I.inventory){t.inventory={};const E=JSON.parse(I.inventory);for(const M in E.fragments){const V=l[M];if(!V)continue;const J=E.fragments[M];t.inventory[V]=(t.inventory[V]||0)+J}}}function S(){if(I.projects){t.projects={};const E=JSON.parse(I.projects);let M=[];I.priority_projects&&(M=JSON.parse(I.priority_projects));let V=1;for(const[J,O]of E){const G=Date.now()+V++,Q=JSON.parse(O);let $={};for(const[N,U]of Q)l[N]&&($[l[N]]=parseInt(U));t.projects[G]={type:"item",date:G,priority:M.includes(J),details:{name:J,ignored_rarities:{}},required:$}}}}}function H(I,F,S=void 0){const E="priconne-quest-helper_data.json",M="priconne-quest-helper-v3_data.json",V="Spugn";if(!S)return;fetch(`https://api.github.com/gists/${I}`,{method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:`token ${F}`}}).then(O=>O.json()).then(O=>{console.log(O),J(O)}).catch(O=>{console.error(O),r(1,c=!0)});function J(O){if(O.owner.login!==V){console.error("fetched gist is not made by",V),r(1,c=!0);return}if(O.files[E])r(2,i=!0);else if(!O.files[M]){console.log("could not find priconne-quest-helper v3 data."),r(1,c=!0);return}if(O.truncated){let Q;i?Q=O.files[E].raw_url:Q=O.files[M].raw_url,console.log("file is truncated... fetching RAW version!",Q),fetch(Q,{method:"GET"}).then($=>$.json()).then($=>{console.log($)}).catch($=>{console.error($),r(1,c=!0)})}let G;i?(G=JSON.parse(O.files[E].content),console.log("legacy gist read success!",G),S(G)):(G=JSON.parse(O.files[M].content),console.log("gist read success!",G),S(G))}}function C(){_.projects&&ee.projects.set(_.projects),_.character&&ee.character.set(_.character),_.inventory&&ee.inventory.set(_.inventory),_.settings&&ee.settings.setAll(_.settings),r(4,a=!0)}return[o,c,i,p,a,v,h,f,g,C,()=>C()]}class Ye extends ye{constructor(e){super(),be(this,e,He,Be,we,{})}}export{Ye as default};
