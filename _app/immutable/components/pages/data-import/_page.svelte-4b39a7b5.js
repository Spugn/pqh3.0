import{S as ye,i as be,s as we,k as b,a as q,q as D,am as Ee,l as w,h as u,c as T,m as $,r as S,n as y,G as s,b as B,u as se,t as R,d as te,f as O,o as ke,g as re,B as z,a9 as ae,w as W,x as X,y as K,z as Z,p as ie}from"../../../chunks/index-651bd197.js";import{b as $e}from"../../../chunks/paths-b4419565.js";import{M as je,c as Ie,a as xe,B as De,C as Se,b as Ae}from"../../../chunks/Button-3f85119c.js";import"../../../chunks/tslib.es6-fc4774d5.js";import{u as ee}from"../../../chunks/user.api-832edbea.js";function ce(m,e,r){const n=m.slice();return n[20]=e[r],n}function fe(m,e,r){const n=m.slice();return n[23]=e[r],n}function ue(m,e,r){const n=m.slice();return n[26]=e[r],n}function qe(m){let e,r,n,d,o,c,i,t,_,l,p,a,h,f,g;return{c(){e=b("div"),r=b("strong"),n=D("Failed to import legacy data"),d=q(),o=b("small"),c=D("No importable data was found."),i=q(),t=b("small"),_=D("Only "),l=b("strong"),p=D("Inventory"),a=D(" and "),h=b("strong"),f=D("Projects"),g=D(" can be converted and imported from legacy data."),this.h()},l(v){e=w(v,"DIV",{class:!0});var E=$(e);r=w(E,"STRONG",{});var N=$(r);n=S(N,"Failed to import legacy data"),N.forEach(u),d=T(E),o=w(E,"SMALL",{});var M=$(o);c=S(M,"No importable data was found."),M.forEach(u),i=T(E),t=w(E,"SMALL",{});var H=$(t);_=S(H,"Only "),l=w(H,"STRONG",{});var C=$(l);p=S(C,"Inventory"),C.forEach(u),a=S(H," and "),h=w(H,"STRONG",{});var Y=$(h);f=S(Y,"Projects"),Y.forEach(u),g=S(H," can be converted and imported from legacy data."),H.forEach(u),E.forEach(u),this.h()},h(){y(e,"class","flex flex-col justify-center items-center")},m(v,E){B(v,e,E),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c),s(e,i),s(e,t),s(t,_),s(t,l),s(l,p),s(t,a),s(t,h),s(h,f),s(t,g)},p:z,i:z,o:z,d(v){v&&u(e)}}}function Te(m){let e,r,n,d,o,c;return{c(){e=b("div"),r=b("strong"),n=D("Failed to import data"),d=q(),o=b("small"),c=D("Refresh the page and try again or try again at a later date."),this.h()},l(i){e=w(i,"DIV",{class:!0});var t=$(e);r=w(t,"STRONG",{});var _=$(r);n=S(_,"Failed to import data"),_.forEach(u),d=T(t),o=w(t,"SMALL",{});var l=$(o);c=S(l,"Refresh the page and try again or try again at a later date."),l.forEach(u),t.forEach(u),this.h()},h(){y(e,"class","flex flex-col justify-center items-center")},m(i,t){B(i,e,t),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c)},p:z,i:z,o:z,d(i){i&&u(e)}}}function Ne(m){let e,r,n,d,o,c,i,t;const _=[Oe,Pe],l=[];function p(v,E){return v[4]?0:1}r=p(m),n=l[r]=_[r](m);let a=m[8].length>0&&Re(m),h=m[6].length>0&&Ce(m),f=m[7].length>0&&Ge(m),g=m[5]&&_e(m);return{c(){e=b("section"),n.c(),d=q(),a&&a.c(),o=q(),h&&h.c(),c=q(),f&&f.c(),i=q(),g&&g.c(),this.h()},l(v){e=w(v,"SECTION",{class:!0});var E=$(e);n.l(E),d=T(E),a&&a.l(E),o=T(E),h&&h.l(E),c=T(E),f&&f.l(E),i=T(E),g&&g.l(E),E.forEach(u),this.h()},h(){y(e,"class","flex flex-col gap-1 pb-40 mx-4 justify-center items-center text-black")},m(v,E){B(v,e,E),l[r].m(e,null),s(e,d),a&&a.m(e,null),s(e,o),h&&h.m(e,null),s(e,c),f&&f.m(e,null),s(e,i),g&&g.m(e,null),t=!0},p(v,E){let N=r;r=p(v),r===N?l[r].p(v,E):(re(),R(l[N],1,1,()=>{l[N]=null}),te(),n=l[r],n?n.p(v,E):(n=l[r]=_[r](v),n.c()),O(n,1),n.m(e,d)),v[8].length>0&&a.p(v,E),v[6].length>0&&h.p(v,E),v[7].length>0&&f.p(v,E),v[5]?g?g.p(v,E):(g=_e(v),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(v){t||(O(n),O(a),O(h),O(f),t=!0)},o(v){R(n),R(a),R(h),R(f),t=!1},d(v){v&&u(e),l[r].d(),a&&a.d(),h&&h.d(),f&&f.d(),g&&g.d()}}}function Pe(m){let e,r,n,d,o,c,i,t,_,l,p,a,h;return o=new De({props:{variant:"raised",class:"w-full",$$slots:{default:[Ve]},$$scope:{ctx:m}}}),o.$on("click",m[10]),{c(){e=b("div"),r=b("div"),n=D("Are you sure you want to import?"),d=q(),W(o.$$.fragment),c=q(),i=b("div"),t=b("span"),_=D("Your existing data will be replaced on this browser if you continue."),l=q(),p=b("span"),a=D("Make sure everything below is correct before proceeding."),this.h()},l(f){e=w(f,"DIV",{class:!0});var g=$(e);r=w(g,"DIV",{class:!0});var v=$(r);n=S(v,"Are you sure you want to import?"),v.forEach(u),d=T(g),X(o.$$.fragment,g),c=T(g),i=w(g,"DIV",{class:!0});var E=$(i);t=w(E,"SPAN",{class:!0});var N=$(t);_=S(N,"Your existing data will be replaced on this browser if you continue."),N.forEach(u),l=T(E),p=w(E,"SPAN",{class:!0});var M=$(p);a=S(M,"Make sure everything below is correct before proceeding."),M.forEach(u),E.forEach(u),g.forEach(u),this.h()},h(){y(r,"class","text-2xl text-yellow-300 font-bold text-center text-shadow py-4 svelte-1ei8749"),y(t,"class","text-red-400"),y(p,"class","italic"),y(i,"class","text-white font-bold text-center text-shadow pt-4 pb-8 flex flex-col gap-1 svelte-1ei8749"),y(e,"class","w-full")},m(f,g){B(f,e,g),s(e,r),s(r,n),s(e,d),K(o,e,null),s(e,c),s(e,i),s(i,t),s(t,_),s(i,l),s(i,p),s(p,a),h=!0},p(f,g){const v={};g&536870912&&(v.$$scope={dirty:g,ctx:f}),o.$set(v)},i(f){h||(O(o.$$.fragment,f),h=!0)},o(f){R(o.$$.fragment,f),h=!1},d(f){f&&u(e),Z(o)}}}function Oe(m){let e,r,n,d,o,c,i,t,_,l,p,a,h,f,g,v;return{c(){e=b("div"),r=b("strong"),n=D("Data Import Complete!"),d=q(),o=b("small"),c=D("You can now close this page or return to the main page."),i=q(),t=b("a"),_=b("span"),l=D("home"),p=q(),a=b("span"),h=D("Home Page"),f=q(),g=b("span"),v=D("launch"),this.h()},l(E){e=w(E,"DIV",{class:!0});var N=$(e);r=w(N,"STRONG",{class:!0});var M=$(r);n=S(M,"Data Import Complete!"),M.forEach(u),d=T(N),o=w(N,"SMALL",{});var H=$(o);c=S(H,"You can now close this page or return to the main page."),H.forEach(u),i=T(N),t=w(N,"A",{href:!0,class:!0,style:!0});var C=$(t);_=w(C,"SPAN",{class:!0});var Y=$(_);l=S(Y,"home"),Y.forEach(u),p=T(C),a=w(C,"SPAN",{});var x=$(a);h=S(x,"Home Page"),x.forEach(u),f=T(C),g=w(C,"SPAN",{class:!0});var F=$(g);v=S(F,"launch"),F.forEach(u),C.forEach(u),N.forEach(u),this.h()},h(){y(r,"class","block text-3xl text-center"),y(_,"class","material-icons"),y(g,"class","material-icons"),y(t,"href",$e+"/"),y(t,"class","flex flex-row justify-center items-center mt-4 gap-2"),ie(t,"color","inherit"),ie(t,"text-decoration","none"),y(e,"class","flex flex-col gap-1 py-5 justify-center items-center text-white text-shadow svelte-1ei8749")},m(E,N){B(E,e,N),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c),s(e,i),s(e,t),s(t,_),s(_,l),s(t,p),s(t,a),s(a,h),s(t,f),s(t,g),s(g,v)},p:z,i:z,o:z,d(E){E&&u(e)}}}function Le(m){let e;return{c(){e=D("done")},l(r){e=S(r,"done")},m(r,n){B(r,e,n)},d(r){r&&u(e)}}}function Me(m){let e;return{c(){e=D("Import Data")},l(r){e=S(r,"Import Data")},m(r,n){B(r,e,n)},d(r){r&&u(e)}}}function Ve(m){let e,r,n,d;return e=new Se({props:{class:"material-icons",$$slots:{default:[Le]},$$scope:{ctx:m}}}),n=new Ae({props:{$$slots:{default:[Me]},$$scope:{ctx:m}}}),{c(){W(e.$$.fragment),r=q(),W(n.$$.fragment)},l(o){X(e.$$.fragment,o),r=T(o),X(n.$$.fragment,o)},m(o,c){K(e,o,c),B(o,r,c),K(n,o,c),d=!0},p(o,c){const i={};c&536870912&&(i.$$scope={dirty:c,ctx:o}),e.$set(i);const t={};c&536870912&&(t.$$scope={dirty:c,ctx:o}),n.$set(t)},i(o){d||(O(e.$$.fragment,o),O(n.$$.fragment,o),d=!0)},o(o){R(e.$$.fragment,o),R(n.$$.fragment,o),d=!1},d(o){Z(e,o),o&&u(r),Z(n,o)}}}function Re(m){let e,r,n,d,o,c,i,t=m[2]&&de(),_=m[8],l=[];for(let a=0;a<_.length;a+=1)l[a]=pe(ue(m,_,a));const p=a=>R(l[a],1,1,()=>{l[a]=null});return{c(){e=b("div"),r=b("div"),n=D("Projects"),d=q(),t&&t.c(),o=q(),c=b("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var h=$(e);r=w(h,"DIV",{class:!0});var f=$(r);n=S(f,"Projects"),f.forEach(u),d=T(h),t&&t.l(h),o=T(h),c=w(h,"DIV",{class:!0});var g=$(c);for(let v=0;v<l.length;v+=1)l[v].l(g);g.forEach(u),h.forEach(u),this.h()},h(){y(r,"class","category-title svelte-1ei8749"),y(c,"class","flex flex-row justify-start flex-wrap gap-1"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(a,h){B(a,e,h),s(e,r),s(r,n),s(e,d),t&&t.m(e,null),s(e,o),s(e,c);for(let f=0;f<l.length;f+=1)l[f].m(c,null);i=!0},p(a,h){if(a[2]?t||(t=de(),t.c(),t.m(e,o)):t&&(t.d(1),t=null),h&256){_=a[8];let f;for(f=0;f<_.length;f+=1){const g=ue(a,_,f);l[f]?(l[f].p(g,h),O(l[f],1)):(l[f]=pe(g),l[f].c(),O(l[f],1),l[f].m(c,null))}for(re(),f=_.length;f<l.length;f+=1)p(f);te()}},i(a){if(!i){for(let h=0;h<_.length;h+=1)O(l[h]);i=!0}},o(a){l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)R(l[h]);i=!1},d(a){a&&u(e),t&&t.d(),ae(l,a)}}}function de(m){let e,r,n,d,o,c;return{c(){e=b("small"),r=b("span"),n=D("info"),d=q(),o=b("span"),c=D("Legacy projects are converted to Item Projects."),this.h()},l(i){e=w(i,"SMALL",{class:!0});var t=$(e);r=w(t,"SPAN",{class:!0});var _=$(r);n=S(_,"info"),_.forEach(u),d=T(t),o=w(t,"SPAN",{class:!0});var l=$(o);c=S(l,"Legacy projects are converted to Item Projects."),l.forEach(u),t.forEach(u),this.h()},h(){y(r,"class","material-icons"),y(o,"class","relative top-[0.2rem]"),y(e,"class","flex flex-row flex-wrap gap-2 mx-4")},m(i,t){B(i,e,t),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c)},d(i){i&&u(e)}}}function pe(m){let e,r;return e=new je({props:{thumbnail:m[26].thumbnail,project_type:m[26].type,priority:m[26].priority,priority_level:m[26].priority_level,project_name:m[26].project_name,subtitle:m[26].subtitle,start_rank:m[26].start_rank,end_rank:m[26].end_rank,progress:-1}}),{c(){W(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,d){K(e,n,d),r=!0},p:z,i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){R(e.$$.fragment,n),r=!1},d(n){Z(e,n)}}}function Ce(m){let e,r,n,d,o,c,i=m[6],t=[];for(let l=0;l<i.length;l+=1)t[l]=he(fe(m,i,l));const _=l=>R(t[l],1,1,()=>{t[l]=null});return{c(){e=b("div"),r=b("div"),n=D("Characters"),d=q(),o=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var p=$(e);r=w(p,"DIV",{class:!0});var a=$(r);n=S(a,"Characters"),a.forEach(u),d=T(p),o=w(p,"DIV",{class:!0});var h=$(o);for(let f=0;f<t.length;f+=1)t[f].l(h);h.forEach(u),p.forEach(u),this.h()},h(){y(r,"class","category-title pb-2 svelte-1ei8749"),y(o,"class","flex flex-row justify-start flex-wrap gap-1 pb-3 pl-3"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(l,p){B(l,e,p),s(e,r),s(r,n),s(e,d),s(e,o);for(let a=0;a<t.length;a+=1)t[a].m(o,null);c=!0},p(l,p){if(p&64){i=l[6];let a;for(a=0;a<i.length;a+=1){const h=fe(l,i,a);t[a]?(t[a].p(h,p),O(t[a],1)):(t[a]=he(h),t[a].c(),O(t[a],1),t[a].m(o,null))}for(re(),a=i.length;a<t.length;a+=1)_(a);te()}},i(l){if(!c){for(let p=0;p<i.length;p+=1)O(t[p]);c=!0}},o(l){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)R(t[p]);c=!1},d(l){l&&u(e),ae(t,l)}}}function he(m){let e,r;return e=new Ie({props:{id:m[23].id,rank:m[23].rank}}),{c(){W(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,d){K(e,n,d),r=!0},p:z,i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){R(e.$$.fragment,n),r=!1},d(n){Z(e,n)}}}function Ge(m){let e,r,n,d,o,c,i=m[7],t=[];for(let l=0;l<i.length;l+=1)t[l]=me(ce(m,i,l));const _=l=>R(t[l],1,1,()=>{t[l]=null});return{c(){e=b("div"),r=b("div"),n=D("Inventory"),d=q(),o=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var p=$(e);r=w(p,"DIV",{class:!0});var a=$(r);n=S(a,"Inventory"),a.forEach(u),d=T(p),o=w(p,"DIV",{class:!0});var h=$(o);for(let f=0;f<t.length;f+=1)t[f].l(h);h.forEach(u),p.forEach(u),this.h()},h(){y(r,"class","category-title pb-2 svelte-1ei8749"),y(o,"class","flex flex-row justify-start flex-wrap gap-1 pb-3 pl-3"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(l,p){B(l,e,p),s(e,r),s(r,n),s(e,d),s(e,o);for(let a=0;a<t.length;a+=1)t[a].m(o,null);c=!0},p(l,p){if(p&128){i=l[7];let a;for(a=0;a<i.length;a+=1){const h=ce(l,i,a);t[a]?(t[a].p(h,p),O(t[a],1)):(t[a]=me(h),t[a].c(),O(t[a],1),t[a].m(o,null))}for(re(),a=i.length;a<t.length;a+=1)_(a);te()}},i(l){if(!c){for(let p=0;p<i.length;p+=1)O(t[p]);c=!0}},o(l){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)R(t[p]);c=!1},d(l){l&&u(e),ae(t,l)}}}function me(m){let e,r;return e=new xe({props:{id:m[20].id,amount:m[20].amount}}),{c(){W(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,d){K(e,n,d),r=!0},p:z,i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){R(e.$$.fragment,n),r=!1},d(n){Z(e,n)}}}function _e(m){let e,r,n,d,o,c;return{c(){e=b("div"),r=b("div"),n=D("Settings"),d=q(),o=b("div"),c=b("textarea"),this.h()},l(i){e=w(i,"DIV",{class:!0});var t=$(e);r=w(t,"DIV",{class:!0});var _=$(r);n=S(_,"Settings"),_.forEach(u),d=T(t),o=w(t,"DIV",{class:!0});var l=$(o);c=w(l,"TEXTAREA",{class:!0,rows:!0}),$(c).forEach(u),l.forEach(u),t.forEach(u),this.h()},h(){y(r,"class","category-title pb-2 svelte-1ei8749"),c.disabled=!0,y(c,"class","w-full h-auto"),y(c,"rows","10"),c.value=m[5],y(o,"class","flex flex-row justify-start flex-wrap gap-1 px-3 pb-3"),y(e,"class","my-4 flex flex-col gap-1 shadow-md bg-white rounded w-full")},m(i,t){B(i,e,t),s(e,r),s(r,n),s(e,d),s(e,o),s(o,c)},p(i,t){t&32&&(c.value=i[5])},d(i){i&&u(e)}}}function Be(m){let e,r,n,d,o,c,i,t,_,l,p,a,h,f,g=m[2]?"Legacy ":"",v,E,N,M,H,C=m[2]?"Legacy ":"",Y,x,F,A,j,I,V,J;const L=[Ne,Te,qe],G=[];function Q(k,P){return!k[1]&&k[0]?0:k[1]?1:k[3]?2:-1}return~(A=Q(m))&&(j=G[A]=L[A](m)),{c(){e=b("meta"),r=b("meta"),n=b("meta"),d=b("meta"),o=b("meta"),c=b("meta"),i=b("meta"),t=b("meta"),_=q(),l=b("div"),p=b("h1"),a=D("Princess Connect! Re:Dive - Quest Helper"),h=q(),f=b("h2"),v=D(g),E=D("Data Import"),N=q(),M=b("h1"),H=D("priconne-quest-helper │ "),Y=D(C),x=D("Data Import"),F=q(),j&&j.c(),I=q(),V=b("section"),this.h()},l(k){const P=Ee("svelte-1qc73oa",document.head);e=w(P,"META",{name:!0,content:!0}),r=w(P,"META",{name:!0,content:!0}),n=w(P,"META",{property:!0,content:!0}),d=w(P,"META",{property:!0,content:!0}),o=w(P,"META",{property:!0,content:!0}),c=w(P,"META",{property:!0,content:!0}),i=w(P,"META",{property:!0,content:!0}),t=w(P,"META",{property:!0,content:!0}),P.forEach(u),_=T(k),l=w(k,"DIV",{class:!0});var U=$(l);p=w(U,"H1",{class:!0});var oe=$(p);a=S(oe,"Princess Connect! Re:Dive - Quest Helper"),oe.forEach(u),h=T(U),f=w(U,"H2",{class:!0});var ne=$(f);v=S(ne,g),E=S(ne,"Data Import"),ne.forEach(u),N=T(U),M=w(U,"H1",{class:!0});var le=$(M);H=S(le,"priconne-quest-helper │ "),Y=S(le,C),x=S(le,"Data Import"),le.forEach(u),U.forEach(u),F=T(k),j&&j.l(k),I=T(k),V=w(k,"SECTION",{});var ve=$(V);ve.forEach(u),this.h()},h(){document.title="priconne-quest-helper | Data Import",y(e,"name","title"),y(e,"content","priconne-quest-helper | Data Import"),y(r,"name","description"),y(r,"content","priconne-quest-helper Data Importing - Transfer data between devices!"),y(n,"property","og:title"),y(n,"content","priconne-quest-helper | Data Import"),y(d,"property","og:description"),y(d,"content","priconne-quest-helper Data Importing - Transfer data between devices!"),y(o,"property","og:image"),y(o,"content","https://raw.githubusercontent.com/Spugn/priconne-quest-helper/master/static/logo128.png"),y(c,"property","og:url"),y(c,"content","https://spugn.github.io/priconne-quest-helper/data-import/"),y(i,"property","twitter:title"),y(i,"content","priconne-quest-helper | Data Import"),y(t,"property","twitter:description"),y(t,"content","priconne-quest-helper Data Importing - Transfer data between devices!"),y(p,"class","title text-[5vw] sm:text-3xl svelte-1ei8749"),y(f,"class","title text-[4vw] sm:text-2xl tracking-widest svelte-1ei8749"),y(M,"class","title simple svelte-1ei8749"),y(l,"class","color-aliceblue text-center text-shadow-md font-bold py-3.5 mb-3 text-white")},m(k,P){s(document.head,e),s(document.head,r),s(document.head,n),s(document.head,d),s(document.head,o),s(document.head,c),s(document.head,i),s(document.head,t),B(k,_,P),B(k,l,P),s(l,p),s(p,a),s(l,h),s(l,f),s(f,v),s(f,E),s(l,N),s(l,M),s(M,H),s(M,Y),s(M,x),B(k,F,P),~A&&G[A].m(k,P),B(k,I,P),B(k,V,P),J=!0},p(k,[P]){(!J||P&4)&&g!==(g=k[2]?"Legacy ":"")&&se(v,g),(!J||P&4)&&C!==(C=k[2]?"Legacy ":"")&&se(Y,C);let U=A;A=Q(k),A===U?~A&&G[A].p(k,P):(j&&(re(),R(G[U],1,1,()=>{G[U]=null}),te()),~A?(j=G[A],j?j.p(k,P):(j=G[A]=L[A](k),j.c()),O(j,1),j.m(I.parentNode,I)):j=null)},i(k){J||(O(j),J=!0)},o(k){R(j),J=!1},d(k){u(e),u(r),u(n),u(d),u(o),u(c),u(i),u(t),k&&u(_),k&&u(l),k&&u(F),~A&&G[A].d(k),k&&u(I),k&&u(V)}}}function ge(){return m(window.location.href).id[0];function m(e){let r=e.indexOf("?")+1,n=e.indexOf("#")+1||e.length+1,d=e.slice(r,n-1),o=d.replace(/\+/g," ").split("&"),c={},i,t,_,l;if(!(d===e||d==="")){for(i=0;i<o.length;i++)l=o[i].split("=",2),t=decodeURIComponent(l[0]),_=decodeURIComponent(l[1]),c.hasOwnProperty(t)||(c[t]=[]),c[t].push(l.length===2?_:null);return c}}}function He(m,e,r){ee.init();const n=["b4aj","zMT2","ST2S","dD4f","9GSV","Hxjz","wM2b","2j1k","ghp_","LBF1","8704351629"];let d="",o=!1,c=!1,i=!1,t={},_={},l={},p=!1,a=!1,h=[],f=[],g=[],v;ke(()=>{console.log(ge());for(const x in n[n.length-1])d+=n[parseInt(n[n.length-1][x])];H(ge(),d,E)});function E(x){i?M(x):(_=x,N(x))}function N(x){var F,A;if(x.character)for(const j in x.character)h.push({id:j,rank:x.character[j].rank});if(x.inventory)for(const j in x.inventory)f.push({id:j,amount:x.inventory[j]});if(x.projects)for(const j in x.projects){const I=x.projects[j];g.push({thumbnail:I.type==="character"?I.details.avatar_id:Object.keys(I.required)[Object.keys(I.required).length*Math.random()<<0],type:I.type||"item",priority:I.priority||!1,priority_level:((F=I.details)===null||F===void 0?void 0:F.priority_level)||2,project_name:((A=I.details)===null||A===void 0?void 0:A.name)||"Untitled Project",subtitle:I.type==="character"?I.details.formal_name:"Item Project",start_rank:I.type==="character"?I.details.start.rank:-1,end_rank:I.type==="character"?I.details.end.rank:-1})}x.settings&&r(5,v=JSON.stringify(x.settings,null,4)),r(0,o=!0)}function M(x){fetch("https://raw.githubusercontent.com/Expugn/priconne-quest-helper/master/data/equipment_data.json",{method:"GET"}).then(j=>j.json()).then(j=>{console.log(j);for(const I in j){const V=j[I];l[V.name]=I,V.has_fragments&&(l[`${V.name} Fragment`]=V.fragment_id)}if(F(),A(),Object.keys(t).length<=0){r(3,p=!0);return}_=t,N(t),console.log("converted data",t),r(0,o=!0)}).catch(j=>{console.error("failed to get legacy equipment data",j),r(1,c=!0)});function F(){if(x.inventory){t.inventory={};const j=JSON.parse(x.inventory);for(const I in j.fragments){const V=l[I];if(!V)continue;const J=j.fragments[I];t.inventory[V]=(t.inventory[V]||0)+J}}}function A(){if(x.projects){t.projects={};const j=JSON.parse(x.projects);let I=[];x.priority_projects&&(I=JSON.parse(x.priority_projects));let V=1;for(const[J,L]of j){const G=Date.now()+V++,Q=JSON.parse(L);let k={};for(const[P,U]of Q)l[P]&&(k[l[P]]=parseInt(U));t.projects[G]={type:"item",date:G,priority:I.includes(J),details:Object.assign({name:J,ignored_rarities:{}},I.includes(J)&&{priority_level:2}),required:k}}}}}function H(x,F,A=void 0){const j="priconne-quest-helper_data.json",I="priconne-quest-helper-v3_data.json",V="Spugn";if(!A)return;fetch(`https://api.github.com/gists/${x}`,{method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:`token ${F}`}}).then(L=>L.json()).then(L=>{console.log(L),J(L)}).catch(L=>{console.error(L),r(1,c=!0)});function J(L){if(L.owner.login!==V){console.error("fetched gist is not made by",V),r(1,c=!0);return}if(L.files[j])r(2,i=!0);else if(!L.files[I]){console.log("could not find priconne-quest-helper v3 data."),r(1,c=!0);return}if(L.truncated){let Q;i?Q=L.files[j].raw_url:Q=L.files[I].raw_url,console.log("file is truncated... fetching RAW version!",Q),fetch(Q,{method:"GET"}).then(k=>k.json()).then(k=>{console.log(k)}).catch(k=>{console.error(k),r(1,c=!0)})}let G;i?(G=JSON.parse(L.files[j].content),console.log("legacy gist read success!",G),A(G)):(G=JSON.parse(L.files[I].content),console.log("gist read success!",G),A(G))}}function C(){_.projects&&ee.projects.set(_.projects),_.character&&ee.character.set(_.character),_.inventory&&ee.inventory.set(_.inventory),_.settings&&ee.settings.setAll(_.settings),r(4,a=!0)}return[o,c,i,p,a,v,h,f,g,C,()=>C()]}class Qe extends ye{constructor(e){super(),be(this,e,He,Be,we,{})}}export{Qe as default};
